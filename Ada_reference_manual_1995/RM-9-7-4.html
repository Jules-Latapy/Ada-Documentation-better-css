<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<HTML>
<HEAD>
    <TITLE>Asynchronous Transfer of Control</TITLE>
    <META NAME="Author" CONTENT="JTC1/SC22/WG9/ARG, by Randall Brukardt, ARG Editor">
    <META NAME="GENERATOR" CONTENT="Arm_Form.Exe, Ada Reference Manual generator">
    <link rel="stylesheet" href="../styles.css">
    
<link rel="icon" href="../logo.svg"></HEAD>
<BODY TEXT="#000000" BGCOLOR="#FFFFF0" LINK="#0000FF" VLINK="#800080" ALINK="#FF0000">
<P class="navig"><img src="../logo.svg" class="adaLogo" /><A HREF="RM-TOC.html">Contents</A>&nbsp;&nbsp;&nbsp;<A HREF="RM-0-29.html">Index</A>&nbsp;&nbsp;&nbsp;<A HREF="../RM-SRCH.html">Search</A>&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="RM-9-7-3.html">Previous</A>&nbsp;&nbsp;&nbsp;<A HREF="RM-9-8.html">Next</A></P>
<div class="main">
<H1> 9.7.4 Asynchronous Transfer of Control</H1>
<DIV Class="Paranum"><FONT SIZE=-2>1</FONT></DIV>
<DIV Class="Normal">&nbsp;&nbsp;&nbsp;An asynchronous <FONT FACE="Arial, Helvetica">select_statement</FONT>
provides asynchronous transfer of control upon completion of an entry
call or the expiration of a delay. </DIV>

<H4 ALIGN=CENTER>Syntax</H4>
<DIV Class="Paranum"><FONT SIZE=-2>2</FONT></DIV>
<DIV Class="SyntaxIndented"><FONT FACE="Arial, Helvetica">asynchronous_select</FONT><FONT FACE="Arial, Helvetica"><A NAME="I3613"></A>
::= </FONT><BR>
&nbsp;&nbsp;<B>select</B><BR>
&nbsp;&nbsp;&nbsp;<A NAME="I3614"></A><FONT FACE="Arial, Helvetica">triggering_alternative</FONT><BR>
&nbsp;&nbsp;<B>then&nbsp;abort</B><BR>
&nbsp;&nbsp;&nbsp;<A NAME="I3615"></A><FONT FACE="Arial, Helvetica">abortable_part</FONT><BR>
&nbsp;&nbsp;<B>end&nbsp;select</B>;</DIV>
<DIV Class="Paranum"><FONT SIZE=-2>3</FONT></DIV>
<DIV Class="SyntaxIndented"><FONT FACE="Arial, Helvetica">triggering_alternative</FONT><FONT FACE="Arial, Helvetica"><A NAME="I3616"></A>
::= </FONT><A NAME="I3617"></A><FONT FACE="Arial, Helvetica">triggering_statement</FONT>&nbsp;[<A NAME="I3618"></A><FONT FACE="Arial, Helvetica">sequence_of_statements</FONT>]</DIV>
<DIV Class="Paranum"><FONT SIZE=-2>4</FONT></DIV>
<DIV Class="SyntaxIndented"><FONT FACE="Arial, Helvetica">triggering_statement</FONT><FONT FACE="Arial, Helvetica"><A NAME="I3619"></A>
::= </FONT><A NAME="I3620"></A><FONT FACE="Arial, Helvetica">entry_call_statement</FONT>&nbsp;|&nbsp;<A NAME="I3621"></A><FONT FACE="Arial, Helvetica">delay_statement</FONT></DIV>
<DIV Class="Paranum"><FONT SIZE=-2>5</FONT></DIV>
<DIV Class="SyntaxIndented"><FONT FACE="Arial, Helvetica">abortable_part</FONT><FONT FACE="Arial, Helvetica"><A NAME="I3622"></A>
::= </FONT><A NAME="I3623"></A><FONT FACE="Arial, Helvetica">sequence_of_statements</FONT></DIV>

<H4 ALIGN=CENTER>Dynamic Semantics</H4>
<DIV Class="Paranum"><FONT SIZE=-2>6</FONT></DIV>
<DIV Class="Normal">&nbsp;&nbsp;&nbsp;<A NAME="I3624"></A>For the execution of an <FONT FACE="Arial, Helvetica">asynchronous_select</FONT>
whose <FONT FACE="Arial, Helvetica">triggering_statement</FONT> is an
<FONT FACE="Arial, Helvetica">entry_call_statement</FONT>, the <I>entry_</I><FONT FACE="Arial, Helvetica">name</FONT>
and actual parameters are evaluated as for a simple entry call (see <A HREF="RM-9-5-3.html">9.5.3</A>),
and the entry call is issued. If the entry call is queued (or requeued-with-abort),
then the <FONT FACE="Arial, Helvetica">abortable_part</FONT> is executed.
If the entry call is selected immediately, and never requeued-with-abort,
then the <FONT FACE="Arial, Helvetica">abortable_part</FONT> is never
started.</DIV>
<DIV Class="Paranum"><FONT SIZE=-2>7</FONT></DIV>
<DIV Class="Normal">&nbsp;&nbsp;&nbsp;<A NAME="I3625"></A>For the execution of an <FONT FACE="Arial, Helvetica">asynchronous_select</FONT>
whose <FONT FACE="Arial, Helvetica">triggering_statement</FONT> is a
<FONT FACE="Arial, Helvetica">delay_statement</FONT>, the <I>delay_</I><FONT FACE="Arial, Helvetica">expression</FONT>
is evaluated and the expiration time is determined, as for a normal <FONT FACE="Arial, Helvetica">delay_statement</FONT>.
If the expiration time has not already passed, the <FONT FACE="Arial, Helvetica">abortable_part</FONT>
is executed.</DIV>
<DIV Class="Paranum"><FONT SIZE=-2>8</FONT></DIV>
<DIV Class="Normal">&nbsp;&nbsp;&nbsp;If the <FONT FACE="Arial, Helvetica">abortable_part</FONT>
completes and is left prior to completion of the <FONT FACE="Arial, Helvetica">triggering_statement</FONT>,
an attempt to cancel the <FONT FACE="Arial, Helvetica">triggering_statement</FONT>
is made. If the attempt to cancel succeeds (see <A HREF="RM-9-5-3.html">9.5.3</A>
and <A HREF="RM-9-6.html">9.6</A>), the <FONT FACE="Arial, Helvetica">asynchronous_select</FONT>
is complete.</DIV>
<DIV Class="Paranum"><FONT SIZE=-2>9</FONT></DIV>
<DIV Class="Normal">&nbsp;&nbsp;&nbsp;If the <FONT FACE="Arial, Helvetica">triggering_statement</FONT>
completes other than due to cancellation, the <FONT FACE="Arial, Helvetica">abortable_part</FONT>
is aborted (if started but not yet completed -- see <A HREF="RM-9-8.html">9.8</A>).
If the <FONT FACE="Arial, Helvetica">triggering_statement</FONT> completes
normally, the optional <FONT FACE="Arial, Helvetica">sequence_of_statements</FONT>
of the <FONT FACE="Arial, Helvetica">triggering_alternative</FONT> is
executed after the <FONT FACE="Arial, Helvetica">abortable_part</FONT>
is left. </DIV>

<H4 ALIGN=CENTER>Examples</H4>
<DIV Class="Paranum"><FONT SIZE=-2>10</FONT></DIV>
<DIV Class="Normal" Style="margin-bottom: 0.4em">&nbsp;&nbsp;&nbsp;&nbsp;<A NAME="I3626"></A><A NAME="I3627"></A><A NAME="I3628"></A><I>Example
of a main command loop for a command interpreter:</I> </DIV>
<DIV Class="Paranum"><FONT SIZE=-2>11</FONT></DIV>
<DIV Class="Examples"><TT><B>loop</B><BR>
&nbsp;&nbsp;&nbsp;&nbsp;<B>select</B><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Terminal.Wait_For_Interrupt;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Put_Line(&quot;Interrupted&quot;);<BR>
&nbsp;&nbsp;&nbsp;&nbsp;<B>then&nbsp;abort</B><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--&nbsp;<I>This&nbsp;will&nbsp;be&nbsp;abandoned&nbsp;upon&nbsp;terminal&nbsp;interrupt</I><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Put_Line(&quot;-&gt;&nbsp;&quot;);<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Get_Line(Command,&nbsp;Last);<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Process_Command(Command(1..Last));<BR>
&nbsp;&nbsp;&nbsp;&nbsp;<B>end</B>&nbsp;<B>select</B>;<BR>
<B>end</B>&nbsp;<B>loop</B>;</TT></DIV>
<DIV Class="Paranum"><FONT SIZE=-2>12</FONT></DIV>
<DIV Class="Wide" Style="margin-bottom: 0.4em">&nbsp;&nbsp;&nbsp;&nbsp;<I>Example of a time-limited
calculation:</I> <A NAME="I3629"></A><A NAME="I3630"></A><A NAME="I3631"></A><A NAME="I3632"></A><A NAME="I3633"></A></DIV>
<DIV Class="Paranum"><FONT SIZE=-2>13</FONT></DIV>
<DIV Class="Examples"><TT><B>select</B><BR>
&nbsp;&nbsp;&nbsp;<B>delay</B>&nbsp;5.0;<BR>
&nbsp;&nbsp;&nbsp;Put_Line(&quot;Calculation&nbsp;does&nbsp;not&nbsp;converge&quot;);<BR>
<B>then&nbsp;abort</B><BR>
&nbsp;&nbsp;&nbsp;--&nbsp;<I>This&nbsp;calculation&nbsp;should&nbsp;finish&nbsp;in&nbsp;5.0&nbsp;seconds;</I><BR>
&nbsp;&nbsp;&nbsp;--&nbsp;<I>&nbsp;if&nbsp;not,&nbsp;it&nbsp;is&nbsp;assumed&nbsp;to&nbsp;diverge.</I><BR>
&nbsp;&nbsp;&nbsp;Horribly_Complicated_Recursive_Function(X,&nbsp;Y);<BR>
<B>end</B>&nbsp;<B>select</B>;</TT></DIV>

</div>
<P><A HREF="RM-TOC.html">Contents</A>&nbsp;&nbsp;&nbsp;<A HREF="RM-0-29.html">Index</A>&nbsp;&nbsp;&nbsp;<A HREF="../RM-SRCH.html">Search</A>&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="RM-9-7-3.html">Previous</A>&nbsp;&nbsp;&nbsp;<A HREF="RM-9-8.html">Next</A>&nbsp;&nbsp;&nbsp;<A HREF="RM-TTL.html">Legal</A></P>
</BODY>
</HTML>
