<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<HTML>
<HEAD>
    <TITLE>Delay Accuracy</TITLE>
    <META NAME="Author" CONTENT="JTC1/SC22/WG9/ARG, by Randall Brukardt, ARG Editor">
    <META NAME="GENERATOR" CONTENT="Arm_Form.Exe, Ada Reference Manual generator">
    <link rel="stylesheet" href="../styles.css">
    
</HEAD>
<BODY TEXT="#000000" BGCOLOR="#FFFFF0" LINK="#0000FF" VLINK="#800080" ALINK="#FF0000">
<P class="navig"><img src="../logo.svg" class="adaLogo" /><A HREF="RM-TOC.html">Contents</A>&nbsp;&nbsp;&nbsp;<A HREF="RM-0-29.html">Index</A>&nbsp;&nbsp;&nbsp;<A HREF="../RM-SRCH.html">Search</A>&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="RM-D-8.html">Previous</A>&nbsp;&nbsp;&nbsp;<A HREF="RM-D-10.html">Next</A></P>
<div class="main">
<H1> D.9 Delay Accuracy</H1>
<DIV Class="Paranum"><FONT SIZE=-2>1</FONT></DIV>
<DIV Class="Normal">&nbsp;&nbsp;&nbsp;This clause specifies performance requirements
for the <FONT FACE="Arial, Helvetica">delay_statement</FONT>. The rules
apply both to <FONT FACE="Arial, Helvetica">delay_relative_statement</FONT>
and to <FONT FACE="Arial, Helvetica">delay_until_statement</FONT>. Similarly,
they apply equally to a simple <FONT FACE="Arial, Helvetica">delay_statement</FONT>
and to one which appears in a <FONT FACE="Arial, Helvetica">delay_alternative</FONT>.
</DIV>

<H4 ALIGN=CENTER>Dynamic Semantics</H4>
<DIV Class="Paranum"><FONT SIZE=-2>2</FONT></DIV>
<DIV Class="Normal" Style="margin-bottom: 0.4em">&nbsp;&nbsp;&nbsp;The effect of the
<FONT FACE="Arial, Helvetica">delay_statement</FONT> for Real_Time.Time
is defined in terms of Real_Time.Clock: </DIV>
<DIV Class="Paranum"><FONT SIZE=-2>3</FONT></DIV>
<UL Class="Bulleted"><LI TYPE=DISC>If C<SUB><FONT SIZE="+1"><FONT SIZE="-2">1</FONT></FONT></SUB>
is a value of Clock read before a task executes a <FONT FACE="Arial, Helvetica">delay_relative_statement</FONT>
with duration D, and C<SUB><FONT SIZE="+1"><FONT SIZE="-2">2</FONT></FONT></SUB>
is a value of Clock read after the task resumes execution following that
<FONT FACE="Arial, Helvetica">delay_statement</FONT>, then C<SUB><FONT SIZE="+1"><FONT SIZE="-2">2</FONT></FONT></SUB>
- C<SUB><FONT SIZE="+1"><FONT SIZE="-2">1</FONT></FONT></SUB> &gt;= D.</LI></UL>
<DIV Class="Paranum"><FONT SIZE=-2>4</FONT></DIV>
<UL Class="Bulleted"><LI TYPE=DISC>If C is a value of Clock read after
a task resumes execution following a <FONT FACE="Arial, Helvetica">delay_until_statement</FONT>
with Real_Time.Time value T, then C &gt;= T. </LI></UL>
<DIV Class="Paranum"><FONT SIZE=-2>5</FONT></DIV>
<DIV Class="Normal">&nbsp;&nbsp;&nbsp;<A NAME="I6653"></A><A NAME="I6654"></A>A simple
<FONT FACE="Arial, Helvetica">delay_statement</FONT> with a negative
or zero value for the expiration time does not cause the calling task
to be blocked; it is nevertheless a potentially blocking operation (see
<A HREF="RM-9-5-1.html">9.5.1</A>).</DIV>
<DIV Class="Paranum"><FONT SIZE=-2>6</FONT></DIV>
<DIV Class="Normal">&nbsp;&nbsp;&nbsp;When a <FONT FACE="Arial, Helvetica">delay_statement</FONT>
appears in a <FONT FACE="Arial, Helvetica">delay_alternative</FONT> of
a <FONT FACE="Arial, Helvetica">timed_entry_call</FONT> the selection
of the entry call is attempted, regardless of the specified expiration
time. When a <FONT FACE="Arial, Helvetica">delay_statement</FONT> appears
in a <FONT FACE="Arial, Helvetica">selective_accept_alternative</FONT>,
and a call is queued on one of the open entries, the selection of that
entry call proceeds, regardless of the value of the delay expression.
</DIV>

<H4 ALIGN=CENTER>Documentation Requirements</H4>
<DIV Class="Paranum"><FONT SIZE=-2>7</FONT></DIV>
<DIV Class="Normal">&nbsp;&nbsp;&nbsp;The implementation shall document the minimum
value of the delay expression of a <FONT FACE="Arial, Helvetica">delay_relative_statement</FONT>
that causes the task to actually be blocked.</DIV>
<DIV Class="Paranum"><FONT SIZE=-2>8</FONT></DIV>
<DIV Class="Normal">&nbsp;&nbsp;&nbsp;The implementation shall document the minimum
difference between the value of the delay expression of a <FONT FACE="Arial, Helvetica">delay_until_statement</FONT>
and the value of Real_Time.Clock, that causes the task to actually be
blocked. </DIV>

<H4 ALIGN=CENTER>Metrics</H4>
<DIV Class="Paranum"><FONT SIZE=-2>9</FONT></DIV>
<DIV Class="Normal" Style="margin-bottom: 0.4em">&nbsp;&nbsp;&nbsp;The implementation
shall document the following metrics: </DIV>
<DIV Class="Paranum"><FONT SIZE=-2>10</FONT></DIV>
<UL Class="Bulleted"><LI TYPE=DISC>An upper bound on the execution time,
in processor clock cycles, of a <FONT FACE="Arial, Helvetica">delay_relative_statement</FONT>
whose requested value of the delay expression is less than or equal to
zero.</LI></UL>
<DIV Class="Paranum"><FONT SIZE=-2>11</FONT></DIV>
<UL Class="Bulleted"><LI TYPE=DISC>An upper bound on the execution time,
in processor clock cycles, of a <FONT FACE="Arial, Helvetica">delay_until_statement</FONT>
whose requested value of the delay expression is less than or equal to
the value of Real_Time.Clock at the time of executing the statement.
Similarly, for Calendar.Clock.</LI></UL>
<DIV Class="Paranum"><FONT SIZE=-2>12</FONT></DIV>
<UL Class="Bulleted"><LI TYPE=DISC><A NAME="I6655"></A><A NAME="I6656"></A>An
upper bound on the <I>lateness</I> of a <FONT FACE="Arial, Helvetica">delay_relative_statement</FONT>,
for a positive value of the delay expression, in a situation where the
task has sufficient priority to preempt the processor as soon as it becomes
ready, and does not need to wait for any other execution resources. The
upper bound is expressed as a function of the value of the delay expression.
The lateness is obtained by subtracting the value of the delay expression
from the <I>actual duration</I>. The actual duration is measured from
a point immediately before a task executes the <FONT FACE="Arial, Helvetica">delay_statement</FONT>
to a point immediately after the task resumes execution following this
statement.</LI></UL>
<DIV Class="Paranum"><FONT SIZE=-2>13</FONT></DIV>
<UL Class="Bulleted"><LI TYPE=DISC>An upper bound on the lateness of
a <FONT FACE="Arial, Helvetica">delay_until_statement</FONT>, in a situation
where the value of the requested expiration time is after the time the
task begins executing the statement, the task has sufficient priority
to preempt the processor as soon as it becomes ready, and it does not
need to wait for any other execution resources. The upper bound is expressed
as a function of the difference between the requested expiration time
and the clock value at the time the statement begins execution. The lateness
of a <FONT FACE="Arial, Helvetica">delay_until_statement</FONT> is obtained
by subtracting the requested expiration time from the real time that
the task resumes execution following this statement. </LI></UL>
<DIV Class="NotesHeader"><FONT SIZE="-1">NOTES</FONT></DIV>
<DIV Class="Paranum"><FONT SIZE=-2>14</FONT></DIV>
<DIV Class="Notes"><FONT SIZE="-1">32&nbsp;&nbsp;The execution time of
a <FONT FACE="Arial, Helvetica">delay_statement</FONT> that does not
cause the task to be blocked (e.g. ``<B>delay</B> 0.0;'' ) is of interest
in situations where delays are used to achieve voluntary round-robin
task dispatching among equal-priority tasks.</FONT></DIV>

</div>
<P><A HREF="RM-TOC.html">Contents</A>&nbsp;&nbsp;&nbsp;<A HREF="RM-0-29.html">Index</A>&nbsp;&nbsp;&nbsp;<A HREF="../RM-SRCH.html">Search</A>&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="RM-D-8.html">Previous</A>&nbsp;&nbsp;&nbsp;<A HREF="RM-D-10.html">Next</A>&nbsp;&nbsp;&nbsp;<A HREF="RM-TTL.html">Legal</A></P>
</BODY>
</HTML>
