<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<HTML>
<HEAD>
    <TITLE>Operations of Access Types</TITLE>
    <META http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
    <META NAME="Author" CONTENT="JTC1/SC22/WG9/ARG, by Randall Brukardt, ARG Editor">
    <META NAME="GENERATOR" CONTENT="Arm_Form.Exe, Ada Reference Manual generator">
    <link rel="stylesheet" href="../styles.css">
	<link rel="icon" href="../logo.svg">
</HEAD>
<BODY TEXT="#000000" BGCOLOR="#FFFFF0" LINK="#000080" VLINK="#330033" ALINK="#0000FF">
<DIV><B><SPAN Style="font-size:200%; color: rgb(0,51,153)">Annotated</SPAN><SPAN Style="font-size:200%; color: rgb(0,0,102)">&nbsp;Ada Reference Manual</SPAN></B> &mdash; <A HREF="AA-TTL.html"><B>Legal Information</B></A></DIV>
<div class="navig"><A HREF="AA-TOC.html">Contents</A>&nbsp;
&nbsp;<A HREF="AA-0-4.html">Index</A>&nbsp;
&nbsp;<A HREF="AA-STDS.html">References</A>&nbsp;
&nbsp;<A HREF="../RM-SRCH.html">Search</A>&nbsp;
&nbsp;<A HREF="AA-3-10-1.html">Previous</A>&nbsp;
&nbsp;<A HREF="AA-3-11.html">Next</A>&nbsp;
<img SRC="../logo.svg" class="adaLogo">
</div>
<div class="main">
<H1>3.10.2 Operations of Access Types</H1>
<div class="paranum"><a name="p1">1/3</a></div>
<div class="Normal">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0299-1.TXT">AI05-0299-1</A></I>} 
[The attribute Access is used to create access values designating aliased 
objects and nonintrinsic subprograms. The &ldquo;accessibility&rdquo; 
rules prevent dangling references (in the absence of uses of certain 
unchecked features &mdash; see <span class="insert3">Clause</span><span class="delete3">&nbsp;Section</span> 
<A HREF="AA-13.html">13</A>).]&nbsp;</div>

<H4 Class="centered">Language Design Principles</H4>
<div class="paranum"><a name="p1.a">1.a</a></div>
<div class="Annotations">It should be possible for an access value to 
designate an object declared by an object declaration, or a subcomponent 
thereof. In implementation terms, this means pointing at stack-allocated 
and statically allocated data structures. However, dangling references 
should be prevented, primarily via compile-time rules, so long as features 
like Unchecked_Access and Unchecked_Deallocation are not used.</div>
<div class="paranum"><a name="p1.b">1.b</a></div>
<div class="Annotations">In order to create such access values, we require 
that the access type be a general access type, that the designated object 
be aliased, and that the accessibility rules be obeyed.&nbsp;</div>

<H4 Class="centered">Name Resolution Rules</H4>
<div class="paranum"><a name="p2">2/2</a></div>
<div class="Normal">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00235.TXT">AI95-00235-01</A></I>} 
<A NAME="I2529"></A>For an <SPAN Class="swiss"><A HREF="AA-4-1-4.html#S0100">attribute_reference</A></SPAN> 
with <SPAN Class="swiss"><A HREF="AA-4-1-4.html#S0101">attribute_designator</A></SPAN> 
Access (or Unchecked_Access &mdash; see <A HREF="AA-13-10.html">13.10</A>), 
the expected type shall be a single access type<span class="insert2">&nbsp;<I>A</I> such that:</span><span class="delete2">&nbsp;[; the <SPAN Class="swiss"><A HREF="AA-4-1.html#S0093">prefix</A></SPAN> 
of such an <SPAN Class="swiss"><A HREF="AA-4-1-4.html#S0100">attribute_reference</A></SPAN> 
is never interpreted as an <SPAN Class="swiss"><A HREF="AA-4-1.html#S0095">implicit_dereference</A></SPAN>]. 
<A NAME="I2530"></A>If the expected type is an access-to-subprogram type, 
then the expected profile of the <SPAN Class="swiss"><A HREF="AA-4-1.html#S0093">prefix</A></SPAN> 
is the designated profile of the access type.</span>&nbsp;</div>
<div class="paranum"><a name="p2.1">2.1/2</a></div>
<div class="Bulleted">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00235.TXT">AI95-00235-01</A></I>} 
<span class="insert2"><I>A</I> is an access-to-object type with designated 
type <I>D</I> and the type of the <SPAN Class="swiss"><A HREF="AA-4-1.html#S0093">prefix</A></SPAN> 
is <I>D</I>'Class or is covered by <I>D</I>, or</span></div>
<div class="paranum"><a name="p2.2">2.2/2</a></div>
<div class="Bulleted">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00235.TXT">AI95-00235-01</A></I>} 
<span class="insert2"><I>A</I> is an access-to-subprogram type whose 
designated profile is type conformant with that of the prefix.</span> 
</div>
<div class="paranum"><a name="p2.3">2.3/2</a></div>
<div class="Normal">&nbsp;&nbsp;{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00235.TXT">AI95-00235-01</A></I>} 
<span class="insert2">[The <SPAN Class="swiss"><A HREF="AA-4-1.html#S0093">prefix</A></SPAN> 
of such an <SPAN Class="swiss"><A HREF="AA-4-1-4.html#S0100">attribute_reference</A></SPAN> 
is never interpreted as an <SPAN Class="swiss"><A HREF="AA-4-1.html#S0095">implicit_dereference</A></SPAN> 
or a parameterless <SPAN Class="swiss"><A HREF="AA-6-4.html#S0179">function_call</A></SPAN> 
(see <A HREF="AA-4-1-4.html">4.1.4</A>).] <A NAME="I2531"></A><A NAME="I2532"></A>The 
designated type or profile of the expected type of the <SPAN Class="swiss"><A HREF="AA-4-1-4.html#S0100">attribute_reference</A></SPAN> 
is the expected type or profile for the <SPAN Class="swiss"><A HREF="AA-4-1.html#S0093">prefix</A></SPAN>.</span> 
</div>
<div class="paranum"><a name="p2.a">2.a</a></div>
<div class="Annotations"><B>Discussion:&nbsp;</B>Saying that the expected 
type shall be a &quot;single access type&quot; is our &quot;new&quot; 
way of saying that the type has to be determinable from context using 
only the fact that it is an access type. See <A HREF="AA-4-2.html">4.2</A> 
and <A HREF="AA-8-6.html">8.6</A>. Specifying the expected profile only 
implies type conformance. The more stringent subtype conformance is required 
by a Legality Rule. This is the only Resolution Rule that applies to 
the <SPAN Class="swiss"><A HREF="AA-4-1.html#S0091">name</A></SPAN> in 
a <SPAN Class="swiss"><A HREF="AA-4-1.html#S0093">prefix</A></SPAN> of 
an <SPAN Class="swiss"><A HREF="AA-4-1-4.html#S0100">attribute_reference</A></SPAN>. 
In all other cases, the <SPAN Class="swiss"><A HREF="AA-4-1.html#S0091">name</A></SPAN> 
has to be resolved without using context. See <A HREF="AA-4-1-4.html">4.1.4</A>.</div>
<div class="paranum"><a name="p2.b">2.b/2</a></div>
<div class="Annotations" style="margin-bottom: 0.4em">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00235.TXT">AI95-00235-01</A></I>} 
<span class="insert2">Saying &ldquo;single access type&rdquo; is a bit 
of a fudge. Both the context and the <SPAN Class="swiss"><A HREF="AA-4-1.html#S0093">prefix</A></SPAN> 
may provide both multiple types; &ldquo;single&rdquo; only means that 
a single, specific interpretation must remain after resolution. We say 
&ldquo;single&rdquo; here to trigger the Legality Rules of <A HREF="AA-8-6.html">8.6</A>. 
The resolution of an access attribute is similar to that of an <SPAN Class="swiss"><A HREF="AA-5-2.html#S0152">assignment_statement</A></SPAN>. 
For example:</span>&nbsp;</div>
<div class="paranum"><a name="p2.c">2.c/2</a></div>
<div class="SmallExamples"><span class="insert2"><B>type</B>&nbsp;Int_Ptr&nbsp;<B>is&nbsp;access&nbsp;all</B>&nbsp;Integer;<BR>
<B>type</B>&nbsp;Char_Ptr&nbsp;<B>is&nbsp;access&nbsp;all</B>&nbsp;Character;<BR>
<B>type</B>&nbsp;Float_Ptr&nbsp;<B>is&nbsp;access&nbsp;all</B>&nbsp;Float;</span></div>
<div class="paranum"><a name="p2.d">2.d/2</a></div>
<div class="SmallExamples"><span class="insert2"><B>function</B>&nbsp;Zap&nbsp;(Val&nbsp;:&nbsp;Int_Ptr)&nbsp;<B>return</B>&nbsp;Float;&nbsp;&nbsp;&nbsp;--&nbsp;<SPAN Class="roman"><I>(1)</I></SPAN><BR>
<B>function</B>&nbsp;Zap&nbsp;(Val&nbsp;:&nbsp;Float_Ptr)&nbsp;<B>return</B>&nbsp;Float;&nbsp;--&nbsp;<SPAN Class="roman"><I>(2)</I></SPAN><BR>
<B>function</B>&nbsp;Zop&nbsp;<B>return</B>&nbsp;Int_Ptr;&nbsp;&nbsp;--&nbsp;<SPAN Class="roman"><I>(3)</I></SPAN><BR>
<B>function</B>&nbsp;Zop&nbsp;<B>return</B>&nbsp;Char_Ptr;&nbsp;--&nbsp;<SPAN Class="roman"><I>(4)</I></SPAN></span></div>
<div class="paranum"><a name="p2.e">2.e/2</a></div>
<div class="SmallExamples"><span class="insert2">Result&nbsp;:&nbsp;Float&nbsp;:=&nbsp;Zap&nbsp;(Zop.<B>all</B>'Access);&nbsp;--&nbsp;<SPAN Class="roman"><I>Resolves&nbsp;to&nbsp;Zap&nbsp;(1)&nbsp;and&nbsp;Zop&nbsp;(3).</I></SPAN></span></div>

<H4 Class="centered">Static Semantics</H4>
<div class="paranum"><a name="p3">3/2</a></div>
<div class="Normal">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00162.TXT">AI95-00162-01</A></I>} 
<A NAME="I2533"></A><A NAME="I2534"></A><A NAME="I2535"></A><A NAME="I2536"></A><A NAME="I2537"></A><A NAME="I2538"></A>[The 
accessibility rules, which prevent dangling references, are written in 
terms of <I>accessibility levels</I>, which reflect the run-time nesting 
of <I>masters</I>. As explained in <A HREF="AA-7-6-1.html">7.6.1</A>, 
a master is the execution of a <span class="insert2">certain construct, 
such as</span><span class="delete2">,<SPAN Class="swiss"><A HREF="AA-9-1.html#S0209">task_body</A></SPAN>, 
a <SPAN Class="swiss"><A HREF="AA-5-6.html#S0160">block_statement</A></SPAN>,</span> 
a <SPAN Class="swiss"><A HREF="AA-6-3.html#S0177">subprogram_body</A></SPAN><span class="delete2">, 
an <SPAN Class="swiss"><A HREF="AA-9-5-2.html#S0221">entry_body</A></SPAN>, 
or an <SPAN Class="swiss"><A HREF="AA-9-5-2.html#S0219">accept_statement</A></SPAN></span>. 
An accessibility level is <I>deeper than</I> another if it is more deeply 
nested at run time. For example, an object declared local to a called 
subprogram has a deeper accessibility level than an object declared local 
to the calling subprogram. The accessibility rules for access types require 
that the accessibility level of an object designated by an access value 
be no deeper than that of the access type. This ensures that the object 
will live at least as long as the access type, which in turn ensures 
that the access value cannot later designate an object that no longer 
exists. The Unchecked_Access attribute may be used to circumvent the 
accessibility rules.]</div>
<div class="paranum"><a name="p3.a">3.a/3</a></div>
<div class="Annotations"><span class="insert3"><B>Discussion:&nbsp;</B></span>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0005-1.TXT">AI05-0005-1</A></I>} 
<span class="insert3">The Unchecked_Access attribute acts as if the object 
was declared at library-level; this applies even when it is used as the 
value of anonymous access type. See <A HREF="AA-13-10.html">13.10</A>.</span></div>
<div class="paranum"><a name="p3.b">3.b/3</a></div>
<div class="Annotations"><span class="insert3">Subclause <A HREF="AA-3-10-2.html">3.10.2</A>, 
home of the accessibility rules, is informally known as the &ldquo;Heart 
of Darkness&rdquo; amongst the maintainers of Ada. Woe unto all who enter 
here (well, at least unto anyone that needs to understand any of these 
rules). <A NAME="I2539"></A><A NAME="I2540"></A></span></div>
<div class="paranum"><a name="p4">4</a></div>
<div class="Normal"><A NAME="I2541"></A><A NAME="I2542"></A>[A given 
accessibility level is said to be <I>statically deeper</I> than another 
if the given level is known at compile time (as defined below) to be 
deeper than the other for all possible executions. In most cases, accessibility 
is enforced at compile time by Legality Rules. Run-time accessibility 
checks are also used, since the Legality Rules do not cover certain cases 
involving access parameters and generic packages.]</div>
<div class="paranum"><a name="p5">5</a></div>
<div class="Normal" style="margin-bottom: 0.4em">Each master, and each 
entity and view created by it, has an accessibility level:&nbsp;</div>
<div class="paranum"><a name="p6">6</a></div>
<div class="Bulleted">The accessibility level of a given master is deeper 
than that of each dynamically enclosing master, and deeper than that 
of each master upon which the task executing the given master directly 
depends (see <A HREF="AA-9-3.html">9.3</A>).</div>
<div class="paranum"><a name="p7">7/3</a></div>
<div class="Bulleted">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00162.TXT">AI95-00162-01</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00416.TXT">AI95-00416-01</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0235-1.TXT">AI05-0235-1</A></I>} 
An entity or view <span class="insert2">defined</span><span class="delete2">&nbsp;created</span> 
by a declaration<span class="insert2">&nbsp;and created as part of its elaboration</span> 
has the same accessibility level as the innermost <span class="delete2">enclosing 
</span>master <span class="insert2">of the declaration&nbsp;</span>except 
in the cases of renaming and derived access types described below. <span class="insert3">Other 
than for an explicitly aliased parameter, a formal</span><span class="delete3">&nbsp;A</span> 
parameter of a <span class="insert3">callable entity</span><span class="delete3">&nbsp;master</span> 
has the same accessibility level as the master<span class="insert3">&nbsp;representing the invocation of the entity</span>.&nbsp;</div>
<div class="paranum"><a name="p7.a">7.a/2</a></div>
<div class="Annotations"><span class="insert2"><B>Reason:&nbsp;</B></span>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00416.TXT">AI95-00416-01</A></I>} 
<span class="insert2">This rule defines the &ldquo;normal&rdquo; accessibility 
of entities. In the absence of special rules below, we intend for this 
rule to apply.</span>&nbsp;</div>
<div class="paranum"><a name="p7.b">7.b/2</a></div>
<div class="Annotations"><span class="insert2"><B>Discussion:&nbsp;</B></span>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00416.TXT">AI95-00416-01</A></I>} 
<span class="insert2">This rule defines the accessibility of all named 
access types, as well as the accessibility level of all anonymous access 
types other than those for access parameters and access discriminants. 
Special rules exist for the accessibility level of such anonymous types. 
Components, stand-alone objects, and function results whose (anonymous) 
type is defined by an <SPAN Class="swiss"><A HREF="AA-3-10.html#S0084">access_definition</A></SPAN> 
have accessibility levels corresponding to named access types defined 
at the same point.</span>&nbsp;</div>
<div class="paranum"><a name="p7.c">7.c/2</a></div>
<div class="Annotations"><span class="insert2"><B>Ramification:&nbsp;</B></span>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00230.TXT">AI95-00230-01</A></I>} 
<span class="insert2">Because accessibility level is determined by where 
the <SPAN Class="swiss"><A HREF="AA-3-10.html#S0084">access_definition</A></SPAN> 
is elaborated, for a type extension, the anonymous access types of components 
(other than access discriminants) inherited from the parent have the 
same accessibility as they did in the parent; those in the extension 
part have the accessibility determined by the scope where the type extension 
is declared. Similarly, the types of the nondiscriminant access components 
of a derived untagged type have the same accessibility as they did in 
the parent.</span>&nbsp;</div>
<div class="paranum"><a name="p7.d">7.d/3</a></div>
<div class="Annotations"><span class="insert3"><B>To be honest:&nbsp;</B></span>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0235-1.TXT">AI05-0235-1</A></I>} 
<span class="insert3">We use &quot;invocation of&quot; in the parameter 
case as a master is formally an execution of something. But we mean this 
to be interpreted statically (for instance, as the body of the subprogram) 
for the purposes of computing &quot;statically deeper than&quot; (see 
below).</span>&nbsp;</div>
<div class="paranum"><a name="p7.e">7.e/3</a></div>
<div class="Annotations"><span class="insert3"><B>Ramification:&nbsp;</B></span>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0235-1.TXT">AI05-0235-1</A></I>} 
<span class="insert3">Note that accessibility can differ depending on 
the view of an object (for both static and dynamic accessibility). For 
instance, the accessibility level of a formal parameter may be different 
than the accessibility level of the corresponding actual parameter. This 
occurs in other cases as well.</span>&nbsp;</div>
<div class="paranum"><a name="p7.f">7.f/3</a></div>
<div class="Annotations"><span class="insert3"><B>Reason:&nbsp;</B></span>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0235-1.TXT">AI05-0235-1</A></I>} 
<span class="insert3">We define the (dynamic) accessibility of formal 
parameters in order that it does not depend on the parameter passing 
model (by-reference or by-copy) as that is implementation defined. Otherwise, 
there would be a portability issue.</span>&nbsp;</div>
<div class="paranum"><a name="p8">8</a></div>
<div class="Bulleted">The accessibility level of a view of an object 
or subprogram defined by a <SPAN Class="swiss"><A HREF="AA-8-5.html#S0199">renaming_declaration</A></SPAN> 
is the same as that of the renamed view.</div>
<div class="paranum"><a name="p9">9/2</a></div>
<div class="Bulleted">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00416.TXT">AI95-00416-01</A></I>} 
The accessibility level of a view conversion<span class="insert2">, <SPAN Class="swiss"><A HREF="AA-4-7.html#S0142">qualified_expression</A></SPAN>, 
or parenthesized expression,</span> is the same as that of the operand.</div>
<div class="paranum"><a name="p9.1">9.1/3</a></div>
<div class="Bulleted">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0188-1.TXT">AI05-0188-1</A></I>} 
<span class="insert3">The accessibility level of a <SPAN Class="swiss"><A HREF="AA-4-5-7.html#S0133">conditional_expression</A></SPAN> 
is the accessibility level of the evaluated <I>dependent_</I><SPAN Class="swiss"><A HREF="AA-4-4.html#S0117">expression</A></SPAN>.</span></div>
<div class="paranum"><a name="p10">10/3</a></div>
<div class="Bulleted">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-10318.TXT">AI95-00318-02</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00416.TXT">AI95-00416-01</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0234-1.TXT">AI05-0234-1</A></I>} 
<span class="insert2">The</span><span class="delete2">&nbsp;For a function 
whose result type is a return-by-reference type, the accessibility level 
of the result object is the same as that of the master that elaborated 
the function body. For any other function, the</span> accessibility level 
of <span class="insert2">an <SPAN Class="swiss"><A HREF="AA-4-3.html#S0106">aggregate</A></SPAN> 
</span><span class="insert2"><span class="delete3">or the result of a 
function call [(or equivalent use of an operator)]&nbsp;</span></span><span class="insert2">that 
is used (in its entirety) to directly initialize part of an</span><span class="delete2">&nbsp;the 
result</span> object is that of the <span class="insert2">object being 
initialized. In other contexts, the accessibility level of an <SPAN Class="swiss"><A HREF="AA-4-3.html#S0106">aggregate</A></SPAN> 
</span><span class="insert2"><span class="delete3">or the result of a 
function call&nbsp;</span></span><span class="insert2">is that of the innermost 
master that evaluates the <SPAN Class="swiss"><A HREF="AA-4-3.html#S0106">aggregate</A></SPAN></span><span class="insert2"><span class="delete3">&nbsp;or function call</span></span><span class="insert2"></span><span class="delete2">&nbsp;execution 
of the called function</span>.</div>
<div class="paranum"><a name="p10.1">10.1/3</a></div>
<div class="Bulleted" style="margin-bottom: 0.3em">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0234-1.TXT">AI05-0234-1</A></I>} 
<span class="insert3">The accessibility level of the result of a function 
call is that of the <I>master of the function call</I>, which is determined 
by the point of call as follows:<A NAME="I2543"></A><A NAME="I2544"></A><A NAME="I2545"></A></span></div>
<div class="paranum"><a name="p10.2">10.2/3</a></div>
<div class="Indented2NestedBulleted"><span class="insert3">If the result 
is used (in its entirety) to directly initialize part of an object, the 
master is that of the object being initialized. In the case where the 
initialized object is a coextension (see below) that becomes a coextension 
of another object, the master is that of the eventual object to which 
the coextension will be transferred.</span></div>
<div class="paranum"><a name="p10.a">10.a/2</a></div>
<div class="Annotations"><span class="insert2"><B>To be honest:&nbsp;</B></span>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00416.TXT">AI95-00416-01</A></I>} 
<span class="insert2">The first sentence is talking about a static use 
of the entire return object &mdash; a slice that happens to be the entire 
return object doesn't count. On the other hand, this is intended to allow 
parentheses and <SPAN Class="swiss"><A HREF="AA-4-7.html#S0142">qualified_expression</A></SPAN>s.</span> 
</div>
<div class="paranum"><a name="p10.b">10.b/3</a></div>
<div class="Annotations"><span class="insert2"><B>Ramification:&nbsp;</B></span>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00416.TXT">AI95-00416-01</A></I>} 
<span class="insert2"></span>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0234-1.TXT">AI05-0234-1</A></I>} 
<span class="insert2">If the function is used as a <SPAN Class="swiss"><A HREF="AA-4-1.html#S0093">prefix</A></SPAN>, 
</span><span class="insert3">this bullet does not apply</span><span class="insert2"></span><span class="insert2"><span class="delete3">&nbsp;the 
second sentence applies</span></span><span class="insert2">. Similarly, 
an <SPAN Class="swiss"><A HREF="AA-5-2.html#S0152">assignment_statement</A></SPAN> 
is not an initialization of an object, so&nbsp;</span><span class="insert3">this 
bullet does not apply</span><span class="insert2"></span><span class="insert2"><span class="delete3">&nbsp;the 
second sentence applies</span></span><span class="insert2">.</span>&nbsp;</div>
<div class="paranum"><a name="p10.3">10.3/3</a></div>
<div class="Indented2NestedBulleted"><span class="insert3">If the result 
is of an anonymous access type and is the operand of an explicit conversion, 
the master is that of the target type of the conversion;</span></div>
<div class="paranum"><a name="p10.4">10.4/3</a></div>
<div class="Indented2NestedBulleted"><span class="insert3">If the result 
is of an anonymous access type and defines an access discriminant, the 
master is the same as that for an object created by an anonymous <SPAN Class="swiss"><A HREF="AA-4-8.html#S0143">allocator</A></SPAN> 
that defines an access discriminant (even if the access result is of 
an access-to-subprogram type).</span></div>
<div class="paranum"><a name="p10.5">10.5/3</a></div>
<div class="Indented2NestedBulleted"><span class="insert3">If the call 
itself defines the result of a function to which one of the above rules 
applies, these rules are applied recursively;</span></div>
<div class="paranum"><a name="p10.6">10.6/3</a></div>
<div class="Indented2NestedBulleted"><span class="insert3">In other cases, 
the master of the call is that of the innermost master that evaluates 
the function call.</span></div>
<div class="paranum"><a name="p10.c">10.c/2</a></div>
<div class="Annotations"><span class="insert2"><B>Ramification:&nbsp;</B></span>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-10318.TXT">AI95-00318-02</A></I>} 
<span class="insert2"></span>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00416.TXT">AI95-00416-01</A></I>} 
<span class="insert2">The &ldquo;innermost master which evaluated the 
function call&rdquo; does not include the function call itself (which 
might be a master).</span></div>
<div class="paranum"><a name="p10.d">10.d/2</a></div>
<div class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-10318.TXT">AI95-00318-02</A></I>} 
<span class="insert2"></span>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00416.TXT">AI95-00416-01</A></I>} 
<span class="insert2">We really mean the innermost master here, which 
could be a very short lifetime. Consider a function call used as a parameter 
of a procedure call. In this case the innermost master which evaluated 
the function call is the procedure call.</span>&nbsp;</div>
<div class="paranum"><a name="p10.d.1">10.d.1/3</a></div>
<div class="Annotations"><span class="insert3"><B>Ramification:&nbsp;</B></span>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0234-1.TXT">AI05-0234-1</A></I>} 
<span class="insert3">These rules do not mention whether the result object 
is built-in-place (see <A HREF="AA-7-6.html">7.6</A>). In particular, 
in the case where building in place is optional, the choice whether or 
not to build-in-place has no effect on masters, lifetimes, or accessibility.</span> 
</div>
<div class="paranum"><a name="p10.d.2">10.d.2/3</a></div>
<div class="Annotations" style="margin-bottom: 0.4em"><span class="insert3"><B>Implementation 
Note:&nbsp;</B></span>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0234-1.TXT">AI05-0234-1</A></I>} 
<span class="insert3">There are several cases where the implementation 
may have to pass in the accessibility level of the result object on a 
call, to support later rules where the accessibility level comes from 
the master of the call:</span></div>
<div class="paranum"><a name="p10.d.3">10.d.3/3</a></div>
<div class="SmallBulleted"><span class="insert3">when the function result 
may have a part with access discriminants;</span></div>
<div class="paranum"><a name="p10.d.4">10.d.4/3</a></div>
<div class="SmallBulleted"><span class="insert3">when the function result 
type is an anonymous access type;</span></div>
<div class="paranum"><a name="p10.d.5">10.d.5/3</a></div>
<div class="SmallBulleted"><span class="insert3">when the function result 
is built-in-place;</span></div>
<div class="paranum"><a name="p10.d.6">10.d.6/3</a></div>
<div class="SmallBulleted"><span class="insert3">when the function has 
an explicitly aliased parameter.</span>&nbsp;</div>
<div class="paranum"><a name="p10.d.7">10.d.7/3</a></div>
<div class="Annotations"><span class="insert3">In particular, this implies 
passing a level parameter when the result type is class-wide, since descendants 
may add access discriminants. For most implementations this will mean 
that functions with controlling results will also need a level parameter.</span> 
</div>
<div class="paranum"><a name="p10.7">10.7/3</a></div>
<div class="Bulleted-NoPrefix">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0284-1.TXT">AI05-0284-1</A></I>} 
<span class="insert3">In the case of a call to a function whose result 
type is an anonymous access type, the accessibility level of the type 
of the result of the function call is also determined by the point of 
call as described above.</span></div>
<div class="paranum"><a name="p10.8">10.8/3</a></div>
<div class="Bulleted">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00416.TXT">AI95-00416-01</A></I>} 
<span class="insert2">Within a return statement, the accessibility level 
of the return object is that of the execution of the return statement. 
If the return statement completes normally by returning from the function, 
then prior to leaving the function, the accessibility level of the return 
object changes to be a level determined by the point of call, as does 
the level of any coextensions (see below) of the return object.</span></div>
<div class="paranum"><a name="p10.e">10.e/2</a></div>
<div class="Annotations"><span class="insert2"><B>Reason:&nbsp;</B>We define 
the accessibility level of the return object during the return statement 
to be that of the return statement itself so that the object may be designated 
by objects local to the return statement, but not by objects outside 
the return statement. In addition, the intent is that the return object 
gets finalized if the return statement ends without actually returning 
(for example, due to propagating an exception, or a goto). For a normal 
return, of course, no finalization is done before returning.</span>&nbsp;</div>
<div class="paranum"><a name="p11">11</a></div>
<div class="Bulleted">The accessibility level of a derived access type 
is the same as that of its ultimate ancestor.</div>
<div class="paranum"><a name="p11.1">11.1/2</a></div>
<div class="Bulleted">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00230.TXT">AI95-00230-01</A></I>} 
<span class="insert2">The accessibility level of the anonymous access 
type defined by an <SPAN Class="swiss"><A HREF="AA-3-10.html#S0084">access_definition</A></SPAN> 
of an <SPAN Class="swiss"><A HREF="AA-8-5-1.html#S0200">object_renaming_declaration</A></SPAN> 
is the same as that of the renamed view.</span></div>
<div class="paranum"><a name="p12">12/2</a></div>
<div class="Bulleted" style="margin-bottom: 0.3em">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00230.TXT">AI95-00230-01</A></I>} 
<span class="insert2"></span>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00416.TXT">AI95-00416-01</A></I>} 
<span class="insert2"></span>The accessibility level of the anonymous 
access type of an access discriminant <span class="insert2">in the <SPAN Class="swiss"><A HREF="AA-3-2-2.html#S0027">subtype_indication</A></SPAN> 
or <SPAN Class="swiss"><A HREF="AA-4-7.html#S0142">qualified_expression</A></SPAN> 
of an <SPAN Class="swiss"><A HREF="AA-4-8.html#S0143">allocator</A></SPAN>, 
or in the <SPAN Class="swiss"><A HREF="AA-4-4.html#S0117">expression</A></SPAN> 
or <SPAN Class="swiss"><A HREF="AA-6-5.html#S0187">return_subtype_indication</A></SPAN> 
of a return statement is determined as follows:</span><span class="delete2">&nbsp;is 
the same as that of the containing object or associated constrained subtype.</span></div>
<div class="paranum"><a name="p12.1">12.1/2</a></div>
<div class="Indented2NestedBulleted"><span class="insert2">If the value 
of the access discriminant is determined by a <SPAN Class="swiss"><A HREF="AA-3-7-1.html#S0065">discriminant_association</A></SPAN> 
in a <SPAN Class="swiss"><A HREF="AA-3-2-2.html#S0027">subtype_indication</A></SPAN>, 
the accessibility level of the object or subprogram designated by the 
associated value (or library level if the value is null);</span>&nbsp;</div>
<div class="paranum"><a name="p12.a">12.a/2</a></div>
<div class="Annotations" style="margin-bottom: 0.4em"><span class="insert2"><B>Discussion: 
</B>This deals with the following cases, when they occur in the context 
of an <SPAN Class="swiss"><A HREF="AA-4-8.html#S0143">allocator</A></SPAN> 
or return statement:</span>&nbsp;</div>
<div class="paranum"><a name="p12.b">12.b/2</a></div>
<div class="SmallNestedBulleted"><span class="insert2">An <SPAN Class="swiss"><A HREF="AA-4-3-2.html#S0111">extension_aggregate</A></SPAN> 
where the <SPAN Class="swiss"><A HREF="AA-4-3-2.html#S0112">ancestor_part</A></SPAN> 
is a <SPAN Class="swiss"><A HREF="AA-3-2-2.html#S0028">subtype_mark</A></SPAN> 
denoting a constrained subtype;</span></div>
<div class="paranum"><a name="p12.c">12.c/2</a></div>
<div class="SmallNestedBulleted"><span class="insert2">An uninitialized 
<SPAN Class="swiss"><A HREF="AA-4-8.html#S0143">allocator</A></SPAN> 
where the <SPAN Class="swiss"><A HREF="AA-3-2-2.html#S0027">subtype_indication</A></SPAN> 
defines a constrained subtype;</span></div>
<div class="paranum"><a name="p12.d">12.d/2</a></div>
<div class="SmallNestedBulleted"><span class="insert2">A discriminant 
of an object with a constrained nominal subtype, including constrained 
components, the result of calling a function with a constrained result 
subtype, the dereference of an access-to-constrained subtype, etc.</span> 
</div>
<div class="paranum"><a name="p12.e">12.e/3</a></div>
<div class="Annotations"><span class="insert3"><B>Ramification:&nbsp;</B></span>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0281-1.TXT">AI05-0281-1</A></I>} 
<span class="insert3">The <SPAN Class="swiss"><A HREF="AA-3-2-2.html#S0027">subtype_indication</A></SPAN> 
mentioned in this bullet is not necessarily the one given in the <SPAN Class="swiss"><A HREF="AA-4-8.html#S0143">allocator</A></SPAN> 
or return statement that is determining the accessibility level; the 
constrained subtype might have been defined in an earlier declaration 
(as a named subtype).</span></div>
<div class="paranum"><a name="p12.f">12.f/3</a></div>
<div class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0005-1.TXT">AI05-0005-1</A></I>} 
<span class="insert3">If the value for this rule and the next one is 
derived from an Unchecked_Access attribute, the accessibility is library-level 
no matter what the accessibility level of the object is (see <A HREF="AA-13-10.html">13.10</A>).</span> 
</div>
<div class="paranum"><a name="p12.2">12.2/3</a></div>
<div class="Indented2NestedBulleted">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0234-1.TXT">AI05-0234-1</A></I>} 
<span class="insert3">If the value of the access discriminant is determined 
by a <SPAN Class="swiss"><A HREF="AA-3-7.html#S0063">default_expression</A></SPAN> 
in the declaration of the discriminant, the level of the object or subprogram 
designated by the associated value (or library level if null);</span> 
</div>
<div class="paranum"><a name="p12.f.1">12.f.1/3</a></div>
<div class="Annotations"><span class="insert3"><B>Discussion:&nbsp;</B>This 
covers the case of an unconstrained subcomponent of a limited type with 
defaulted access discriminants.</span>&nbsp;</div>
<div class="paranum"><a name="p12.3">12.3/3</a></div>
<div class="Indented2NestedBulleted">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0004-1.TXT">AI05-0004-1</A></I>} 
<span class="insert2">If the value of the access discriminant is determined 
by a&nbsp;</span><span class="insert3"><SPAN Class="swiss"><A HREF="AA-4-3-1.html#S0109">record_component_association</A></SPAN></span><span class="insert2"></span><span class="insert2"><span class="delete3"><SPAN Class="swiss">&nbsp;component_association</SPAN></span></span><span class="insert2">&nbsp;in an <SPAN Class="swiss"><A HREF="AA-4-3.html#S0106">aggregate</A></SPAN>, 
the accessibility level of the object or subprogram designated by the 
associated value (or library level if the value is null);</span></div>
<div class="paranum"><a name="p12.g">12.g/2</a></div>
<div class="Annotations"><span class="insert2"><B>Discussion:&nbsp;</B>In 
this bullet, the <SPAN Class="swiss"><A HREF="AA-4-3.html#S0106">aggregate</A></SPAN> 
has to occur in the context of an <SPAN Class="swiss"><A HREF="AA-4-8.html#S0143">allocator</A></SPAN> 
or return statement, while the <SPAN Class="swiss"><A HREF="AA-3-2-2.html#S0027">subtype_indication</A></SPAN> 
of the previous bullet can occur anywhere (it doesn't have to be directly 
given in the <SPAN Class="swiss"><A HREF="AA-4-8.html#S0143">allocator</A></SPAN> 
or return statement).</span>&nbsp;</div>
<div class="paranum"><a name="p12.4">12.4/3</a></div>
<div class="Indented2NestedBulleted"><span class="insert2">In other cases, 
where the value of the access discriminant is determined by an object 
with an unconstrained nominal subtype, the accessibility level of the 
object.</span></div>
<div class="paranum"><a name="p12.h">12.h/2</a></div>
<div class="Annotations"><span class="insert2"><B>Discussion:&nbsp;</B></span>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00416.TXT">AI95-00416-01</A></I>} 
<span class="insert2">In other words, if you know the value of the discriminant 
for an <SPAN Class="swiss"><A HREF="AA-4-8.html#S0143">allocator</A></SPAN> 
or return statement from a discriminant constraint or an <SPAN Class="swiss"><A HREF="AA-4-3.html#S0106">aggregate</A></SPAN> 
component association, then that determines the accessibility level; 
if you don't know it, then it is based on the object itself.</span>&nbsp;</div>
<div class="paranum"><a name="p12.5">12.5/3</a></div>
<div class="Bulleted">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00416.TXT">AI95-00416-01</A></I>} 
<span class="insert2">The accessibility level of the anonymous access 
type of an access discriminant in any other context is that of the enclosing 
object.</span></div>
<div class="paranum"><a name="p13">13/3</a></div>
<div class="Bulleted">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00162.TXT">AI95-00162-01</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00254.TXT">AI95-00254-01</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0270-1.TXT">AI05-0270-1</A></I>} 
The accessibility level of the anonymous access type of an access parameter<span class="insert2">&nbsp;specifying an access-to-object type</span> is the same as that of the 
view designated by the actual<span class="insert3">&nbsp;(or library-level 
if the actual is null)</span>.<span class="delete2">&nbsp;If the actual is 
an <SPAN Class="swiss"><A HREF="AA-4-8.html#S0143">allocator</A></SPAN>, 
this is the accessibility level of the execution of the called subprogram.</span> 
</div>
<div class="paranum"><a name="p13.a">13.a/3</a></div>
<div class="Annotations"><span class="insert3"><B>Ramification:&nbsp;</B></span>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0005-1.TXT">AI05-0005-1</A></I>} 
<span class="insert3">If the value of the actual is derived from an Unchecked_Access 
attribute, the accessibility is always library-level (see <A HREF="AA-13-10.html">13.10</A>).</span> 
</div>
<div class="paranum"><a name="p13.1">13.1/2</a></div>
<div class="Bulleted">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00254.TXT">AI95-00254-01</A></I>} 
<span class="insert2">The accessibility level of the anonymous access 
type of an access parameter specifying an access-to-subprogram type is 
deeper than that of any master; all such anonymous access types have 
this same level.</span>&nbsp;</div>
<div class="paranum"><a name="p13.b">13.b/2</a></div>
<div class="Annotations"><span class="insert2"><B>Reason:&nbsp;</B><A NAME="I2546"></A><A NAME="I2547"></A>These 
represent &ldquo;downward closures&rdquo; and thus require passing of 
static links or global display information (along with generic sharing 
information if the implementation does sharing) along with the address 
of the subprogram. We must prevent conversions of these to types with 
&ldquo;normal&rdquo; accessibility, as those typically don't include 
the extra information needed to make a call.</span>&nbsp;</div>
<div class="paranum"><a name="p13.2">13.2/3</a></div>
<div class="Bulleted">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0148-1.TXT">AI05-0148-1</A></I>} 
<span class="insert3"></span>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0240-1.TXT">AI05-0240-1</A></I>} 
<span class="insert3">The accessibility level of the type of a stand-alone 
object of an anonymous access-to-object type is the same as the accessibility 
level of the type of the access value most recently assigned to the object[; 
accessibility checks ensure that this is never deeper than that of the 
declaration of the stand-alone object].</span></div>
<div class="paranum"><a name="p13.3">13.3/3</a></div>
<div class="Bulleted">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0142-4.TXT">AI05-0142-4</A></I>} 
<span class="insert3"></span>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0240-1.TXT">AI05-0240-1</A></I>} 
<span class="insert3">The accessibility level of an explicitly aliased 
(see <A HREF="AA-6-1.html">6.1</A>) formal parameter in a function body 
is determined by the point of call; it is the same level that the return 
object ultimately will have.</span></div>
<div class="paranum"><a name="p14">14/3</a></div>
<div class="Bulleted" style="margin-bottom: 0.3em">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00416.TXT">AI95-00416-01</A></I>} 
<span class="insert2"></span>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0051-1.TXT">AI05-0051-1</A></I>} 
<span class="insert2"></span>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0253-1.TXT">AI05-0253-1</A></I>} 
<span class="insert2"></span>The accessibility level of an object created 
by an <SPAN Class="swiss"><A HREF="AA-4-8.html#S0143">allocator</A></SPAN> 
is the same as that of the access type<span class="insert2">, except 
for an <SPAN Class="swiss"><A HREF="AA-4-8.html#S0143">allocator</A></SPAN> 
of an anonymous access type&nbsp;</span><span class="insert3">(an <I>anonymous 
allocator</I>) in <A NAME="I2548"></A>certain contexts, as follows: For 
an anonymous allocator that defines the result of a function with an 
access result, the accessibility level is determined as though the <SPAN Class="swiss"><A HREF="AA-4-8.html#S0143">allocator</A></SPAN> 
were in place of the call of the function; in the special case of a call 
that is the operand of a type conversion, the level is that of the target 
access type of the conversion</span><span class="insert2"></span><span class="insert2"><span class="delete3">&nbsp;that 
defines the value of an access parameter or an access discriminant</span></span><span class="insert2">. 
For an&nbsp;</span><span class="insert3">anonymous allocator</span><span class="insert2"></span><span class="insert2"><span class="delete3"><SPAN Class="swiss"><A HREF="AA-4-8.html#S0143">&nbsp;allocator</A></SPAN></span></span><span class="insert2">&nbsp;defining the value of an access parameter, the accessibility level is 
that of the innermost master of the call.&nbsp;</span><span class="insert3">For 
an anonymous allocator whose type is that of a stand-alone object of 
an anonymous access-to-object type, the accessibility level is that of 
the declaration of the stand-alone object.&nbsp;</span><span class="insert2">For 
one defining an access discriminant, the accessibility level is determined 
as follows:</span><span class="delete2">.</span></div>
<div class="paranum"><a name="p14.1">14.1/3</a></div>
<div class="Indented2NestedBulleted">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00416.TXT">AI95-00416-01</A></I>} 
<span class="insert2"></span>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0024-1.TXT">AI05-0024-1</A></I>} 
<span class="insert2">for an <SPAN Class="swiss"><A HREF="AA-4-8.html#S0143">allocator</A></SPAN> 
used to define the&nbsp;</span><span class="insert3">discriminant of an object, 
the level of the object</span><span class="insert2"></span><span class="insert2"><span class="delete3">&nbsp;constraint 
in a <SPAN Class="swiss"><A HREF="AA-3-2-2.html#S0026">subtype_declaration</A></SPAN>, 
the level of the <SPAN Class="swiss"><A HREF="AA-3-2-2.html#S0026">subtype_declaration</A></SPAN></span></span><span class="insert2">;</span></div>
<div class="paranum"><a name="p14.2">14.2/3</a></div>
<div class="Indented2NestedBulleted">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00416.TXT">AI95-00416-01</A></I>} 
<span class="insert2"></span>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0024-1.TXT">AI05-0024-1</A></I>} 
<span class="insert2">for an <SPAN Class="swiss"><A HREF="AA-4-8.html#S0143">allocator</A></SPAN> 
used to define the constraint in a&nbsp;</span><span class="insert3"><SPAN Class="swiss"><A HREF="AA-3-2-2.html#S0027">subtype_indication</A></SPAN> 
in any other context, the level of the master that elaborates the <SPAN Class="swiss"><A HREF="AA-3-2-2.html#S0027">subtype_indication</A></SPAN>.</span><span class="insert2"></span><span class="insert2"><span class="delete3"><SPAN Class="swiss"><A HREF="AA-3-6.html#S0056">&nbsp;component_definition</A></SPAN>, 
the level of the enclosing type;</span></span><span class="insert2"></span></div>
<div class="paranum"><a name="p14.3">14.3/3</a></div>
<div class="Indented2NestedBulleted"><SPAN STYLE="font-size: 80%"><I>This 
paragraph was deleted.</I></SPAN><span class="insert2"></span> {<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00416.TXT">AI95-00416-01</A></I>} 
<span class="insert2"></span>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0024-1.TXT">AI05-0024-1</A></I>} 
<span class="insert2"></span><span class="insert2"><span class="delete3">for 
an <SPAN Class="swiss"><A HREF="AA-4-8.html#S0143">allocator</A></SPAN> 
used to define the discriminant of an object, the level of the object.</span></span><span class="insert2"></span></div>
<div class="paranum"><a name="p14.4">14.4/3</a></div>
<div class="Bulleted-NoPrefix">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00416.TXT">AI95-00416-01</A></I>} 
<span class="insert2"></span>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0024-1.TXT">AI05-0024-1</A></I>} 
<span class="insert2"></span>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0066-1.TXT">AI05-0066-1</A></I>} 
<span class="insert2"><A NAME="I2549"></A>In&nbsp;</span><span class="insert3">the 
first</span><span class="insert2"></span><span class="insert2"><span class="delete3">&nbsp;this 
last</span></span><span class="insert2">&nbsp;case, the allocated object is 
said to be a <I>coextension</I> of the object whose discriminant designates 
it, as well as of any object of which the discriminated object is itself 
a coextension or subcomponent.</span><span class="insert3">&nbsp;If the allocated 
object is a coextension of an anonymous object representing the result 
of an aggregate or function call that is used (in its entirety) to directly 
initialize a part of an object, after the result is assigned, the coextension 
becomes a coextension of the object being initialized and is no longer 
considered a coextension of the anonymous object.</span><span class="insert2">&nbsp;All coextensions of an object&nbsp;</span><span class="insert3">[(which have 
not thus been transfered by such an initialization)]&nbsp;</span><span class="insert2">are 
finalized when the object is finalized (see <A HREF="AA-7-6-1.html">7.6.1</A>).</span> 
</div>
<div class="paranum"><a name="p14.a.1">14.a.1/2</a></div>
<div class="Annotations"><span class="insert2"><B>Ramification:&nbsp;</B>The 
rules of access discriminants are such that when the space for an object 
with a coextension is reclaimed, the space for the coextensions can be 
reclaimed. Hence, there is implementation advice (see 13.11) that an 
object and its coextensions all be allocated from the same storage pool 
(or stack frame, in the case of a declared object).</span>&nbsp;</div>
<div class="paranum"><a name="p14.5">14.5/3</a></div>
<div class="Bulleted">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0051-1.TXT">AI05-0051-1</A></I>} 
<span class="insert3">Within a return statement, the accessibility level 
of the anonymous access type of an access result is that of the master 
of the call.</span></div>
<div class="paranum"><a name="p15">15/3</a></div>
<div class="Bulleted">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0014-1.TXT">AI05-0014-1</A></I>} 
The accessibility level of a view of an object or subprogram <span class="insert3">designated 
by</span><span class="delete3">&nbsp;denoted by a dereference of</span> an 
access value is the same as that of the access type.&nbsp;</div>
<div class="paranum"><a name="p15.a">15.a/3</a></div>
<div class="Annotations"><span class="insert3"><B>Discussion:&nbsp;</B></span>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0005-1.TXT">AI05-0005-1</A></I>} 
<span class="insert3"></span>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0014-1.TXT">AI05-0014-1</A></I>} 
<span class="insert3">This rule applies even when no dereference exists, 
for example when an access value is passed as an access parameter. This 
rule ensures that implementations are not required to include dynamic 
accessibility values with all access values.</span>&nbsp;</div>
<div class="paranum"><a name="p16">16</a></div>
<div class="Bulleted">The accessibility level of a component, protected 
subprogram, or entry of (a view of) a composite object is the same as 
that of (the view of) the composite object.&nbsp;</div>
<div class="paranum"><a name="p16.1">16.1/3</a></div>
<div class="Normal">&nbsp;&nbsp;&nbsp;{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00416.TXT">AI95-00416-01</A></I>} 
<span class="insert2"></span>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0262-1.TXT">AI05-0262-1</A></I>} 
<span class="insert2">In the above rules, the operand of a view conversion, 
parenthesized expression or <SPAN Class="swiss"><A HREF="AA-4-7.html#S0142">qualified_expression</A></SPAN> 
is considered to be used in a context if the view conversion, parenthesized 
expression or <SPAN Class="swiss"><A HREF="AA-4-7.html#S0142">qualified_expression</A></SPAN> 
itself is used in that context.</span><span class="insert3">&nbsp;Similarly, 
a <I>dependent_</I><SPAN Class="swiss"><A HREF="AA-4-4.html#S0117">expression</A></SPAN> 
of a <SPAN Class="swiss"><A HREF="AA-4-5-7.html#S0133">conditional_expression</A></SPAN> 
is considered to be used in a context if the <SPAN Class="swiss"><A HREF="AA-4-5-7.html#S0133">conditional_expression</A></SPAN> 
itself is used in that context.</span><span class="insert2"></span></div>
<div class="paranum"><a name="p17">17</a></div>
<div class="WideAbove" style="margin-bottom: 0.4em"><A NAME="I2550"></A><A NAME="I2551"></A>One 
accessibility level is defined to be <I>statically deeper</I> than another 
in the following cases:&nbsp;</div>
<div class="paranum"><a name="p18">18</a></div>
<div class="Bulleted">For a master that is statically nested within another 
master, the accessibility level of the inner master is statically deeper 
than that of the outer master.&nbsp;</div>
<div class="paranum"><a name="p18.a">18.a</a></div>
<div class="Annotations"><B>To be honest:&nbsp;</B>Strictly speaking, this 
should talk about the <I>constructs</I> (such as <SPAN Class="swiss">subprogram_bodies</SPAN>) 
being statically nested within one another; the masters are really the 
<I>executions</I> of those constructs.&nbsp;</div>
<div class="paranum"><a name="p18.b">18.b</a></div>
<div class="Annotations"><B>To be honest:&nbsp;</B>If a given accessibility 
level is statically deeper than another, then each level defined to be 
the same as the given level is statically deeper than each level defined 
to be the same as the other level.&nbsp;</div>
<div class="paranum"><a name="p18.1">18.1/2</a></div>
<div class="Bulleted">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00254.TXT">AI95-00254-01</A></I>} 
<span class="insert2">The accessibility level of the anonymous access 
type of an access parameter specifying an access-to-subprogram type is 
statically deeper than that of any master; all such anonymous access 
types have this same level.</span>&nbsp;</div>
<div class="paranum"><a name="p18.c">18.c/2</a></div>
<div class="Annotations"><span class="insert2"><B>Ramification:&nbsp;</B>This 
rule means that it is illegal to convert an access parameter specifying 
an access to subprogram to a named access to subprogram type, but it 
is allowed to pass such an access parameter to another access parameter 
(the implicit conversion's accessibility will succeed).</span>&nbsp;</div>
<div class="paranum"><a name="p19">19/3</a></div>
<div class="Bulleted">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00254.TXT">AI95-00254-01</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0082-1.TXT">AI05-0082-1</A></I>} 
The statically deeper relationship does not apply to the accessibility 
level of the anonymous type of an access parameter<span class="insert2">&nbsp;specifying an access-to-object type</span><span class="insert3">&nbsp;nor 
does it apply to a descendant of a generic formal type</span>; that is, 
such an accessibility level is not considered to be statically deeper, 
nor statically shallower, than any other.</div>
<div class="paranum"><a name="p19.1">19.1/3</a></div>
<div class="Bulleted">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0148-1.TXT">AI05-0148-1</A></I>} 
<span class="insert3">The statically deeper relationship does not apply 
to the accessibility level of the type of a stand-alone object of an 
anonymous access-to-object type; that is, such an accessibility level 
is not considered to be statically deeper, nor statically shallower, 
than any other.</span></div>
<div class="paranum"><a name="p19.a">19.a/3</a></div>
<div class="Annotations"><span class="insert3"><B>Ramification:&nbsp;</B>In 
these cases, we use dynamic accessibility checks.</span>&nbsp;</div>
<div class="paranum"><a name="p19.2">19.2/3</a></div>
<div class="Bulleted">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0142-4.TXT">AI05-0142-4</A></I>} 
<span class="insert3"></span>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0235-1.TXT">AI05-0235-1</A></I>} 
<span class="insert3">Inside a return statement that applies to a function 
<I>F</I>, when determining whether the accessibility level of an explicitly 
aliased parameter of <I>F</I> is statically deeper than the level of 
the return object of <I>F</I>, the level of the return object is considered 
to be the same as that of the level of the explicitly aliased parameter; 
for statically comparing with the level of other entities, an explicitly 
aliased parameter of <I>F</I> is considered to have the accessibility 
level of the body of <I>F</I>.</span></div>
<div class="paranum"><a name="p19.3">19.3/3</a></div>
<div class="Bulleted">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0051-1.TXT">AI05-0051-1</A></I>} 
<span class="insert3"></span>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0234-1.TXT">AI05-0234-1</A></I>} 
<span class="insert3"></span>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0235-1.TXT">AI05-0235-1</A></I>} 
<span class="insert3">For determining whether a level is statically deeper 
than the level of the anonymous access type of an access result of a 
function, when within a return statement that applies to the function, 
the level of the master of the call is presumed to be the same as that 
of the level of the master that elaborated the function body.</span></div>
<div class="paranum"><a name="p19.b">19.b/3</a></div>
<div class="Annotations"><span class="insert3"><B>To be honest:&nbsp;</B></span>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0235-1.TXT">AI05-0235-1</A></I>} 
<span class="insert3">This rule has no effect if the previous bullet 
also applies (that is, the &ldquo;a level&rdquo; is of an explicitly 
aliased parameter).</span>&nbsp;</div>
<div class="paranum"><a name="p20">20</a></div>
<div class="Bulleted">[For determining whether one level is statically 
deeper than another when within a generic package body, the generic package 
is presumed to be instantiated at the same level as where it was declared; 
run-time checks are needed in the case of more deeply nested instantiations.] 
</div>
<div class="paranum"><a name="p20.a">20.a/3</a></div>
<div class="Annotations"><span class="insert3"><B>Proof:&nbsp;</B></span>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0082-1.TXT">AI05-0082-1</A></I>} 
<span class="insert3">A generic package does not introduce a new master, 
so it has the static level of its declaration; the rest follows from 
the other &ldquo;statically deeper&rdquo; rules.</span>&nbsp;</div>
<div class="paranum"><a name="p21">21</a></div>
<div class="Bulleted">For determining whether one level is statically 
deeper than another when within the declarative region of a <SPAN Class="swiss"><A HREF="AA-3-2-1.html#S0023">type_declaration</A></SPAN>, 
the current instance of the type is presumed to be an object created 
at a deeper level than that of the type.&nbsp;</div>
<div class="paranum"><a name="p21.a">21.a</a></div>
<div class="Annotations"><B>Ramification:&nbsp;</B>In other words, the rules 
are checked at compile time of the <SPAN Class="swiss"><A HREF="AA-3-2-1.html#S0023">type_declaration</A></SPAN>, 
in an assume-the-worst manner.&nbsp;</div>
<div class="paranum"><a name="p22">22</a></div>
<div class="Normal"><A NAME="I2552"></A><A NAME="I2553"></A>The accessibility 
level of all library units is called the <I>library level</I>; a library-level 
declaration or entity is one whose accessibility level is the library 
level.&nbsp;</div>
<div class="paranum"><a name="p22.a">22.a</a></div>
<div class="Annotations"><B>Ramification:&nbsp;</B><SPAN Class="swiss"><A HREF="AA-10-1-1.html#S0249">Library_unit_declaration</A></SPAN>s 
are library level. Nested declarations are library level if they are 
nested only within packages (possibly more than one), and not within 
subprograms, tasks, etc.&nbsp;</div>
<div class="paranum"><a name="p22.b">22.b/2</a></div>
<div class="Annotations" style="margin-bottom: 0.4em"><B>To be honest: 
</B>The definition of the accessibility level of the anonymous type of 
an access parameter<span class="insert2">&nbsp;specifying an access-to-object 
type</span> cheats a bit, since it refers to the view designated by the 
actual, but access values designate objects, not views of objects. What 
we really mean is the view that &ldquo;would be&rdquo; denoted by an 
expression &ldquo;X.<B>all</B>&rdquo;, where X is the actual, even though 
such an expression is a figment of our imagination. The definition is 
intended to be equivalent to the following more verbose version: The 
accessibility level of the anonymous type of an access parameter is as 
follows:&nbsp;</div>
<div class="paranum"><a name="p22.c">22.c</a></div>
<div class="SmallBulleted">if the actual is an expression of a named 
access type &mdash; the accessibility level of that type;</div>
<div class="paranum"><a name="p22.d">22.d</a></div>
<div class="SmallBulleted">if the actual is an <SPAN Class="swiss"><A HREF="AA-4-8.html#S0143">allocator</A></SPAN> 
&mdash; the accessibility level of the execution of the called subprogram;</div>
<div class="paranum"><a name="p22.e">22.e/1</a></div>
<div class="SmallBulleted">if the actual is a reference to the Access 
attribute &mdash; the accessibility level of the view denoted by the 
<span class="insert1"><SPAN Class="swiss"><A HREF="AA-4-1.html#S0093">prefix</A></SPAN></span><span class="delete1">&nbsp;prefix</span>;</div>
<div class="paranum"><a name="p22.f">22.f</a></div>
<div class="SmallBulleted">if the actual is a reference to the Unchecked_Access 
attribute &mdash; library accessibility level;</div>
<div class="paranum"><a name="p22.g">22.g</a></div>
<div class="SmallBulleted">if the actual is an access parameter &mdash; 
the accessibility level of its type.&nbsp;</div>
<div class="paranum"><a name="p22.h">22.h</a></div>
<div class="Annotations">Note that the <SPAN Class="swiss"><A HREF="AA-4-8.html#S0143">allocator</A></SPAN> 
case is explicitly mentioned in the RM95, because otherwise the definition 
would be circular: the level of the anonymous type is that of the view 
designated by the actual, which is that of the access type.&nbsp;</div>
<div class="paranum"><a name="p22.i">22.i</a></div>
<div class="Annotations"><B>Discussion:&nbsp;</B>A deeper accessibility level 
implies a shorter maximum lifetime. Hence, when a rule requires X to 
have a level that is &ldquo;not deeper than&rdquo; Y's level, this requires 
that X has a lifetime at least as long as Y. (We say &ldquo;maximum lifetime&rdquo; 
here, because the accessibility level really represents an upper bound 
on the lifetime; an object created by an <SPAN Class="swiss"><A HREF="AA-4-8.html#S0143">allocator</A></SPAN> 
can have its lifetime prematurely ended by an instance of Unchecked_Deallocation.)</div>
<div class="paranum"><a name="p22.j">22.j</a></div>
<div class="Annotations">Package elaborations are not masters, and are 
therefore invisible to the accessibility rules: an object declared immediately 
within a package has the same accessibility level as an object declared 
immediately within the declarative region containing the package. This 
is true even in the body of a package; it jibes with the fact that objects 
declared in a <SPAN Class="swiss"><A HREF="AA-7-2.html#S0192">package_body</A></SPAN> 
live as long as objects declared outside the package, even though the 
body objects are not visible outside the package.</div>
<div class="paranum"><a name="p22.k">22.k</a></div>
<div class="Annotations">Note that the level of the <I>view</I> denoted 
by X.<B>all</B> can be different from the level of the <I>object</I> 
denoted by X.<B>all</B>. The former is determined by the type of X; the 
latter is determined either by the type of the <SPAN Class="swiss"><A HREF="AA-4-8.html#S0143">allocator</A></SPAN>, 
or by the master in which the object was declared. The former is used 
in several Legality Rules and run-time checks; the latter is used to 
define when X.<B>all</B> gets finalized. The level of a view reflects 
what we can conservatively &ldquo;know&rdquo; about the object of that 
view; for example, due to <SPAN Class="swiss"><A HREF="AA-4-6.html#S0141">type_conversion</A></SPAN>s, 
an access value might designate an object that was allocated by an <SPAN Class="swiss"><A HREF="AA-4-8.html#S0143">allocator</A></SPAN> 
for a different access type.</div>
<div class="paranum"><a name="p22.l">22.l</a></div>
<div class="Annotations">Similarly, the level of the view denoted by 
X.<B>all</B>.Comp can be different from the level of the object denoted 
by X.<B>all</B>.Comp.</div>
<div class="paranum"><a name="p22.m">22.m</a></div>
<div class="Annotations">If Y is statically deeper than X, this implies 
that Y will be (dynamically) deeper than X in all possible executions.</div>
<div class="paranum"><a name="p22.n">22.n</a></div>
<div class="Annotations" style="margin-bottom: 0.4em">Most accessibility 
checking is done at compile time; the rules are stated in terms of &ldquo;statically 
deeper than&rdquo;. The exceptions are:&nbsp;</div>
<div class="paranum"><a name="p22.o">22.o/2</a></div>
<div class="SmallBulleted">Checks involving access parameters<span class="insert2">&nbsp;of an access-to-object type</span>. The fact that &ldquo;statically deeper 
than&rdquo; is not defined for the anonymous access type of an access 
parameter implies that any rule saying &ldquo;shall not be statically 
deeper than&rdquo; does not apply to such a type, nor to anything defined 
to have &ldquo;the same&rdquo; level as such a type.</div>
<div class="paranum"><a name="p22.o.1">22.o.1/3</a></div>
<div class="SmallBulleted">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0082-1.TXT">AI05-0082-1</A></I>} 
<span class="insert3">Checks involving generic formal types and their 
descendants. This is because the actual type can be more or less deeply 
nested than the generic unit. Note that this only applies to the generic 
unit itself, and not to the instance. Any static checks needed in the 
instance will be performed. Any other checks (such as those in the generic 
body) will require a run-time check of some sort (although implementations 
that macro-expand generics can determine the result of the check when 
the generic is expanded).</span></div>
<div class="paranum"><a name="p22.p">22.p/3</a></div>
<div class="SmallBulleted">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0082-1.TXT">AI05-0082-1</A></I>} 
Checks involving <span class="insert3">other&nbsp;</span>entities and views 
within generic packages. This is because an instantiation can be at a 
level that is more deeply nested than the generic package itself. In 
implementations that use a macro-expansion model of generics, these violations 
can be detected at macro-expansion time. For implementations that share 
generics, run-time code is needed to detect the error.</div>
<div class="paranum"><a name="p22.q">22.q/2</a></div>
<div class="SmallBulleted">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-10318.TXT">AI95-00318-02</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00344.TXT">AI95-00344-01</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00416.TXT">AI95-00416-01</A></I>} 
Checks during function return<span class="insert2">&nbsp;and <SPAN Class="swiss"><A HREF="AA-4-8.html#S0143">allocator</A></SPAN>s, 
for nested type extensions and access discriminants</span>.&nbsp;</div>
<div class="paranum"><a name="p22.r">22.r/3</a></div>
<div class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0005-1.TXT">AI05-0005-1</A></I>} 
Note that run-time checks are not required for access discriminants<span class="insert3">&nbsp;(except during function returns and <SPAN Class="swiss"><A HREF="AA-4-8.html#S0143">allocator</A></SPAN>s)</span>, 
because their accessibility is determined statically by the accessibility 
level of the enclosing object.</div>
<div class="paranum"><a name="p22.s">22.s/2</a></div>
<div class="Annotations"><span class="delete2">This&nbsp;</span>The accessibility 
level of the result object of a function reflects the time when that 
object will be finalized; we don't allow pointers to the object to survive 
beyond that time.</div>
<div class="paranum"><a name="p22.t">22.t</a></div>
<div class="Annotations">We sometimes use the terms &ldquo;accessible&rdquo; 
and &ldquo;inaccessible&rdquo; to mean that something has an accessibility 
level that is not deeper, or deeper, respectively, than something else. 
</div>
<div class="paranum"><a name="p22.u">22.u/2</a></div>
<div class="Annotations"><B>Implementation Note:&nbsp;</B>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-10318.TXT">AI95-00318-02</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00344.TXT">AI95-00344-01</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00416.TXT">AI95-00416-01</A></I>} 
If an accessibility Legality Rule is satisfied, then the corresponding 
run-time check (if any) cannot fail (and a reasonable implementation 
will not generate any checking code) unless <span class="insert2">one 
of the cases requiring run-time checks mentioned previously is</span><span class="delete2">&nbsp;access 
parameters or shared generic bodies are</span> involved.</div>
<div class="paranum"><a name="p22.v">22.v</a></div>
<div class="Annotations">Accessibility levels are defined in terms of 
the relations &ldquo;the same as&rdquo; and &ldquo;deeper than&rdquo;. 
To make the discussion more concrete, we can assign actual numbers to 
each level. Here, we assume that library-level accessibility is level 
0, and each level defined as &ldquo;deeper than&rdquo; is one level deeper. 
Thus, a subprogram directly called from the environment task (such as 
the main subprogram) would be at level 1, and so on.</div>
<div class="paranum"><a name="p22.w">22.w/2</a></div>
<div class="Annotations">Accessibility is not enforced at compile time 
for access parameters<span class="insert2">&nbsp;of an access-to-object type</span>. 
The &ldquo;obvious&rdquo; implementation of the run-time checks would 
be inefficient, and would involve distributed overhead; therefore, an 
efficient method is given below. The &ldquo;obvious&rdquo; implementation 
would be to pass the level of the caller at each subprogram call, task 
creation, etc. This level would be incremented by 1 for each dynamically 
nested master. An Accessibility_Check would be implemented as a simple 
comparison &mdash; checking that X is not deeper than Y would involve 
checking that X &lt;= Y.</div>
<div class="paranum"><a name="p22.x">22.x</a></div>
<div class="Annotations">A more efficient method is based on passing 
<I>static</I> nesting levels (within constructs that correspond at run 
time to masters &mdash; packages don't count). Whenever an access parameter 
is passed, an implicit extra parameter is passed with it. The extra parameter 
represents (in an indirect way) the accessibility level of the anonymous 
access type, and, therefore, the level of the view denoted by a dereference 
of the access parameter. This is analogous to the implicit &ldquo;Constrained&rdquo; 
bit associated with certain formal parameters of an unconstrained but 
definite composite subtype. In this method, we avoid distributed overhead: 
it is not necessary to pass any extra information to subprograms that 
have no access parameters. For anything other than an access parameter 
and its anonymous type, the static nesting level is known at compile 
time, and is defined analogously to the RM95 definition of accessibility 
level (e.g. derived access types get their nesting level from their parent). 
Checking &ldquo;not deeper than&rdquo; is a &quot;&lt;=&quot; test on 
the levels.</div>
<div class="paranum"><a name="p22.y">22.y/2</a></div>
<div class="Annotations" style="margin-bottom: 0.4em">For each access 
parameter<span class="insert2">&nbsp;of an access-to-object type</span>, the 
static depth passed depends on the actual, as follows:&nbsp;</div>
<div class="paranum"><a name="p22.z">22.z</a></div>
<div class="SmallBulleted">If the actual is an expression of a named 
access type, pass the static nesting level of that type.</div>
<div class="paranum"><a name="p22.aa">22.aa</a></div>
<div class="SmallBulleted">If the actual is an <SPAN Class="swiss"><A HREF="AA-4-8.html#S0143">allocator</A></SPAN>, 
pass the static nesting level of the caller, plus one.</div>
<div class="paranum"><a name="p22.bb">22.bb/1</a></div>
<div class="SmallBulleted">If the actual is a reference to the Access 
attribute, pass the level of the view denoted by the <span class="insert1"><SPAN Class="swiss"><A HREF="AA-4-1.html#S0093">prefix</A></SPAN></span><span class="delete1">&nbsp;prefix</span>.</div>
<div class="paranum"><a name="p22.cc">22.cc</a></div>
<div class="SmallBulleted">If the actual is a reference to the Unchecked_Access 
attribute, pass 0 (the library accessibility level).</div>
<div class="paranum"><a name="p22.dd">22.dd/2</a></div>
<div class="SmallBulleted">If the actual is an access parameter<span class="insert2">&nbsp;of an access-to-object type</span>, usually just pass along the level 
passed in. However, if the static nesting level of the formal (access) 
parameter is greater than the static nesting level of the actual (access) 
parameter, the level to be passed is the minimum of the static nesting 
level of the access parameter and the actual level passed in.&nbsp;</div>
<div class="paranum"><a name="p22.ee">22.ee/2</a></div>
<div class="Annotations">For the Accessibility_Check associated with 
a <SPAN Class="swiss"><A HREF="AA-4-6.html#S0141">type_conversion</A></SPAN> 
of an access parameter<span class="insert2">&nbsp;of an access-to-object type</span> 
of a given subprogram to a named access type, if the target type is statically 
nested within the subprogram, do nothing; the check can't fail in this 
case. Otherwise, check that the value passed in is &lt;= the static nesting 
depth of the target type. The other Accessibility_Checks are handled 
in a similar manner.</div>
<div class="paranum"><a name="p22.ff">22.ff</a></div>
<div class="Annotations">This method, using statically known values most 
of the time, is efficient, and, more importantly, avoids distributed 
overhead.</div>
<div class="paranum"><a name="p22.ff.1">22.ff.1/3</a></div>
<div class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0148-1.TXT">AI05-0148-1</A></I>} 
<span class="insert3">The implementation of accessibility checks for 
stand-alone objects of anonymous access-to-object types can be similar 
to that for anonymous access-to-object parameters. A static level suffices; 
it can be calculated using rules similar to those previously described 
for access parameters.</span></div>
<div class="paranum"><a name="p22.ff.2">22.ff.2/3</a></div>
<div class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0148-1.TXT">AI05-0148-1</A></I>} 
<span class="insert3">One important difference between the stand-alone 
access variables and access parameters is that one can assign a local 
access parameter to a more global stand-alone access variable. Similarly, 
one can assign a more global access parameter to a more local stand-alone 
access variable.</span></div>
<div class="paranum"><a name="p22.ff.3">22.ff.3/3</a></div>
<div class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0148-1.TXT">AI05-0148-1</A></I>} 
<span class="insert3">For these cases, it is important to note that the 
&ldquo;correct&rdquo; static accessibility level for an access parameter 
assigned to a stand-alone access object is the minimum of the passed 
in level and the static accessibility level of the stand-alone object 
itself. This is true since the static accessibility level passed in might 
be deeper than that of the stand-alone object, but the dynamic accessibility 
of the passed in object clearly must be shallower than the stand-alone 
object (whatever is passed in must live at least as long as the subprogram 
call). We do not need to keep a more local static level as accesses to 
objects statically deeper than the stand-alone object cannot be stored 
into the stand-alone object.</span>&nbsp;</div>
<div class="paranum"><a name="p22.gg">22.gg</a></div>
<div class="Annotations" style="margin-bottom: 0.4em"><B>Discussion: 
</B>Examples of accessibility:&nbsp;</div>
<div class="paranum"><a name="p22.hh">22.hh/3</a></div>
<div class="SmallExamples">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0005-1.TXT">AI05-0005-1</A></I>} 
<B>package</B>&nbsp;<B>body</B>&nbsp;Lib_Unit&nbsp;<B>is</B><BR>
&nbsp;&nbsp;&nbsp;&nbsp;<B>type</B>&nbsp;T&nbsp;<B>is</B>&nbsp;<B>tagged</B>&nbsp;...;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;<B>type</B>&nbsp;A0&nbsp;<B>is</B>&nbsp;<B>access</B>&nbsp;<B>all</B>&nbsp;T;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;Global:&nbsp;A0&nbsp;:=&nbsp;...;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;<B>procedure</B>&nbsp;P(X:&nbsp;<span class="insert3"><B>in&nbsp;out</B>&nbsp;</span>T)&nbsp;<B>is</B><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Y:&nbsp;<B>aliased</B>&nbsp;T;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<B>type</B>&nbsp;A1&nbsp;<B>is</B>&nbsp;<B>access</B>&nbsp;<B>all</B>&nbsp;T;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Ptr0:&nbsp;A0&nbsp;:=&nbsp;Global;&nbsp;--<SPAN Class="roman"><I>&nbsp;OK.</I></SPAN><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Ptr1:&nbsp;A1&nbsp;:=&nbsp;X'Access;&nbsp;--<SPAN Class="roman"><I>&nbsp;OK.</I></SPAN><BR>
&nbsp;&nbsp;&nbsp;&nbsp;<B>begin</B><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Ptr1&nbsp;:=&nbsp;Y'Access;&nbsp;--<SPAN Class="roman"><I>&nbsp;OK;</I></SPAN><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Ptr0&nbsp;:=&nbsp;A0(Ptr1);&nbsp;--<SPAN Class="roman"><I>&nbsp;Illegal&nbsp;type&nbsp;conversion!</I></SPAN><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Ptr0&nbsp;:=&nbsp;X'Access;&nbsp;--<SPAN Class="roman"><I>&nbsp;Illegal&nbsp;reference&nbsp;to&nbsp;Access&nbsp;attribute!</I></SPAN><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Ptr0&nbsp;:=&nbsp;Y'Access;&nbsp;--<SPAN Class="roman"><I>&nbsp;Illegal&nbsp;reference&nbsp;to&nbsp;Access&nbsp;attribute!</I></SPAN><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Global&nbsp;:=&nbsp;Ptr0;&nbsp;--<SPAN Class="roman"><I>&nbsp;OK.</I></SPAN><BR>
&nbsp;&nbsp;&nbsp;&nbsp;<B>end</B>&nbsp;P;<BR>
<B>end</B>&nbsp;Lib_Unit;</div>
<div class="paranum"><a name="p22.ii">22.ii/3</a></div>
<div class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0005-1.TXT">AI05-0005-1</A></I>} 
The above illegal statements are illegal because the accessibility <span class="insert3">levels</span><span class="delete3">&nbsp;level</span> 
of X and Y are statically deeper than the accessibility level of A0. 
In every possible execution of any program including this library unit, 
if P is called, the accessibility level of X will be (dynamically) deeper 
than that of A0. Note that the accessibility levels of X and Y are the 
same.</div>
<div class="paranum"><a name="p22.jj">22.jj/2</a></div>
<div class="Annotations" style="margin-bottom: 0.4em">Here's an example 
involving access parameters<span class="insert2">&nbsp;of an access-to-object 
type</span>:&nbsp;</div>
<div class="paranum"><a name="p22.kk">22.kk</a></div>
<div class="SmallExamples"><B>procedure</B>&nbsp;Main&nbsp;<B>is</B><BR>
&nbsp;&nbsp;&nbsp;&nbsp;<B>type</B>&nbsp;Level_1_Type&nbsp;<B>is</B>&nbsp;<B>access</B>&nbsp;<B>all</B>&nbsp;Integer;</div>
<div class="paranum"><a name="p22.ll">22.ll</a></div>
<div class="SmallExamples">&nbsp;&nbsp;&nbsp;&nbsp;<B>procedure</B>&nbsp;P(X:&nbsp;<B>access</B>&nbsp;Integer)&nbsp;<B>is</B><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<B>type</B>&nbsp;Nested_Type&nbsp;<B>is</B>&nbsp;<B>access</B>&nbsp;<B>all</B>&nbsp;Integer;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;<B>begin</B><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;...&nbsp;Nested_Type(X)&nbsp;...&nbsp;--<SPAN Class="roman"><I>&nbsp;(1)</I></SPAN><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;...&nbsp;Level_1_Type(X)&nbsp;...&nbsp;--<SPAN Class="roman"><I>&nbsp;(2)</I></SPAN><BR>
&nbsp;&nbsp;&nbsp;&nbsp;<B>end</B>&nbsp;P;</div>
<div class="paranum"><a name="p22.mm">22.mm</a></div>
<div class="SmallExamples">&nbsp;&nbsp;&nbsp;&nbsp;<B>procedure</B>&nbsp;Q(X:&nbsp;<B>access</B>&nbsp;Integer)&nbsp;<B>is</B><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<B>procedure</B>&nbsp;Nested(X:&nbsp;<B>access</B>&nbsp;Integer)&nbsp;<B>is</B><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<B>begin</B><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;P(X);<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<B>end</B>&nbsp;Nested;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;<B>begin</B><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Nested(X);<BR>
&nbsp;&nbsp;&nbsp;&nbsp;<B>end</B>&nbsp;Q;</div>
<div class="paranum"><a name="p22.nn">22.nn</a></div>
<div class="SmallExamples">&nbsp;&nbsp;&nbsp;&nbsp;<B>procedure</B>&nbsp;R&nbsp;<B>is</B><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Level_2:&nbsp;<B>aliased</B>&nbsp;Integer;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;<B>begin</B><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Q(Level_2'Access);&nbsp;--<SPAN Class="roman"><I>&nbsp;(3)</I></SPAN><BR>
&nbsp;&nbsp;&nbsp;&nbsp;<B>end</B>&nbsp;R;</div>
<div class="paranum"><a name="p22.oo">22.oo</a></div>
<div class="SmallExamples">&nbsp;&nbsp;&nbsp;&nbsp;Level_1:&nbsp;<B>aliased</B>&nbsp;Integer;<BR>
<B>begin</B><BR>
&nbsp;&nbsp;&nbsp;&nbsp;Q(Level_1'Access);&nbsp;--<SPAN Class="roman"><I>&nbsp;(4)</I></SPAN><BR>
&nbsp;&nbsp;&nbsp;&nbsp;R;<BR>
<B>end</B>&nbsp;Main;</div>
<div class="paranum"><a name="p22.pp">22.pp</a></div>
<div class="Annotations">The run-time Accessibility_Check at (1) can 
never fail, and no code should be generated to check it. The check at 
(2) will fail when called from (3), but not when called from (4).</div>
<div class="paranum"><a name="p22.qq">22.qq</a></div>
<div class="Annotations" style="margin-bottom: 0.4em">Within a <SPAN Class="swiss"><A HREF="AA-3-2-1.html#S0023">type_declaration</A></SPAN>, 
the rules are checked in an assume-the-worst manner. For example:&nbsp;</div>
<div class="paranum"><a name="p22.rr">22.rr/3</a></div>
<div class="SmallExamples">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0298-1.TXT">AI05-0298-1</A></I>} 
<B>package</B>&nbsp;P&nbsp;<B>is</B><BR>
&nbsp;&nbsp;&nbsp;&nbsp;<B>type</B>&nbsp;Int_Ptr&nbsp;<B>is</B>&nbsp;<B>access</B>&nbsp;<B>all</B>&nbsp;Integer;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;<B>type</B>&nbsp;Rec(D:&nbsp;<B>access</B>&nbsp;Integer)&nbsp;<B>is</B>&nbsp;<B>limited</B>&nbsp;<B>private</B>;<BR>
<B>private</B><BR>
&nbsp;&nbsp;&nbsp;&nbsp;<B>type</B>&nbsp;Rec_Ptr&nbsp;<B>is</B>&nbsp;<B>access</B>&nbsp;<B>all</B>&nbsp;Rec;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;<B>function</B>&nbsp;F(X:&nbsp;Rec_Ptr)&nbsp;<B>return</B>&nbsp;Boolean;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;<B>function</B>&nbsp;G(X:&nbsp;<B>access</B>&nbsp;Rec)&nbsp;<B>return</B>&nbsp;Boolean;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;<B>type</B>&nbsp;Rec(D:&nbsp;<B>access</B>&nbsp;Integer)&nbsp;<B>is</B><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="insert3"><B>limited</B>&nbsp;</span><B>record</B><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;C1:&nbsp;Int_Ptr&nbsp;:=&nbsp;Int_Ptr(D);&nbsp;--<SPAN Class="roman"><I>&nbsp;Illegal!</I></SPAN><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;C2:&nbsp;Rec_Ptr&nbsp;:=&nbsp;Rec'Access;&nbsp;--<SPAN Class="roman"><I>&nbsp;Illegal!</I></SPAN><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;C3:&nbsp;Boolean&nbsp;:=&nbsp;F(Rec'Access);&nbsp;--<SPAN Class="roman"><I>&nbsp;Illegal!</I></SPAN><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;C4:&nbsp;Boolean&nbsp;:=&nbsp;G(Rec'Access);<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<B>end</B>&nbsp;<B>record</B>;<BR>
<B>end</B>&nbsp;P;</div>
<div class="paranum"><a name="p22.ss">22.ss</a></div>
<div class="Annotations">C1, C2, and C3 are all illegal, because one 
might declare an object of type Rec at a more deeply nested place than 
the declaration of the type. C4 is legal, but the accessibility level 
of the object will be passed to function G, and constraint checks within 
G will prevent it from doing any evil deeds.</div>
<div class="paranum"><a name="p22.tt">22.tt</a></div>
<div class="Annotations">Note that we cannot defer the checks on C1, 
C2, and C3 until compile-time of the object creation, because that would 
cause violation of the privacy of private parts. Furthermore, the problems 
might occur within a task or protected body, which the compiler can't 
see while compiling an object creation.&nbsp;</div>
<div class="paranum"><a name="p23">23</a></div>
<div class="WideAbove" style="margin-bottom: 0.4em">The following attribute 
is defined for a <SPAN Class="swiss"><A HREF="AA-4-1.html#S0093">prefix</A></SPAN> 
X that denotes an aliased view of an object:&nbsp;</div>
<div class="paranum"><a name="p24">24/1</a></div>
<div class="WideHanging-Term">&nbsp;X'Access</div><div class="WideHanging-Body">
<A NAME="I2554"></A><A NAME="I2555"></A>{<I><A HREF="defect1.html#8652/0010">8652/0010</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00127.TXT">AI95-00127-01</A></I>} 
X'Access yields an access value that designates the object denoted by 
X. The type of X'Access is an access-to-object type, as determined by 
the expected type. The expected type shall be a general access type. 
<A NAME="I2556"></A>X shall denote an aliased view of an object[, including 
possibly the current instance (see <A HREF="AA-8-6.html">8.6</A>) of 
a limited type within its definition, or a formal parameter or generic 
formal object of a tagged type]. The view denoted by the <SPAN Class="swiss"><A HREF="AA-4-1.html#S0093">prefix</A></SPAN> 
X shall satisfy the following additional requirements, presuming the 
expected type for X'Access is the general access type <I>A</I><span class="insert1">&nbsp;with designated type <I>D</I></span>:&nbsp;</div>
<div class="paranum"><a name="p25">25</a></div>
<div class="Indented4Bulleted">If <I>A</I> is an access-to-variable type, 
then the view shall be a variable; [on the other hand, if <I>A</I> is 
an access-to-constant type, the view may be either a constant or a variable.] 
</div>
<div class="paranum"><a name="p25.a">25.a</a></div>
<div class="Annotations"><B>Discussion:&nbsp;</B>The current instance of a 
limited type is considered a variable.&nbsp;</div>
<div class="paranum"><a name="p26">26/3</a></div>
<div class="Indented4Bulleted">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00363.TXT">AI95-00363-01</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0008-1.TXT">AI05-0008-1</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0041-1.TXT">AI05-0041-1</A></I>} 
The view shall not be a subcomponent that depends on discriminants of 
<span class="insert3">an object unless the object is known to be constrained</span><span class="delete3">&nbsp;a 
variable whose nominal subtype is unconstrained, unless this subtype 
is indefinite, or the variable is&nbsp;</span><span class="insert2"><span class="delete3">constrained 
by its initial value</span></span><span class="delete3"></span><span class="delete2">&nbsp;aliased</span><span class="delete3"></span>.</div>
<div class="paranum"><a name="p26.a">26.a</a></div>
<div class="Annotations"><B>Discussion:&nbsp;</B>This restriction is intended 
to be similar to the restriction on renaming discriminant-dependent subcomponents. 
</div>
<div class="paranum"><a name="p26.b">26.b</a></div>
<div class="Annotations"><B>Reason:&nbsp;</B>This prevents references to subcomponents 
that might disappear or move or change constraints after creating the 
reference.&nbsp;</div>
<div class="paranum"><a name="p26.c">26.c</a></div>
<div class="Annotations" style="margin-bottom: 0.4em"><B>Implementation 
Note:&nbsp;</B>There was some thought to making this restriction more stringent, 
roughly: &quot;X shall not denote a subcomponent of a variable with discriminant-dependent 
subcomponents, if the nominal subtype of the variable is an unconstrained 
definite subtype.&quot; This was because in some implementations, it 
is not just the discriminant-dependent subcomponents that might move 
as the result of an assignment that changed the discriminants of the 
enclosing object. However, it was decided not to make this change because 
a reasonable implementation strategy was identified to avoid such problems, 
as follows:&nbsp;</div>
<div class="paranum"><a name="p26.d">26.d</a></div>
<div class="SmallBulleted">Place non-discriminant-dependent components 
with any aliased parts at offsets preceding any discriminant-dependent 
components in a discriminated record type with defaulted discriminants.</div>
<div class="paranum"><a name="p26.e">26.e</a></div>
<div class="SmallBulleted">Preallocate the maximum space for unconstrained 
discriminated variables with aliased subcomponents, rather than allocating 
the initial size and moving them to a larger (heap-resident) place if 
they grow as the result of an assignment.&nbsp;</div>
<div class="paranum"><a name="p26.f">26.f</a></div>
<div class="Annotations">Note that for objects of a by-reference type, 
it is not an error for a programmer to take advantage of the fact that 
such objects are passed by reference. Therefore, the above approach is 
also necessary for discriminated record types with components of a by-reference 
type.</div>
<div class="paranum"><a name="p26.g">26.g</a></div>
<div class="Annotations">To make the above strategy work, it is important 
that a component of a derived type is defined to be discriminant-dependent 
if it is inherited and the parent subtype constraint is defined in terms 
of a discriminant of the derived type (see <A HREF="AA-3-7.html">3.7</A>). 
</div>
<div class="paranum"><a name="p27">27/2</a></div>
<div class="Indented4Bulleted">{<I><A HREF="defect1.html#8652/0010">8652/0010</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00127.TXT">AI95-00127-01</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00363.TXT">AI95-00363-01</A></I>} 
If <span class="insert1"><I>A</I> is a named access type and <I>D</I> 
is a tagged type</span><span class="delete1">&nbsp;the designated type of 
<I>A</I> is tagged</span>, then the type of the view shall be covered 
by <span class="insert1"><I>D</I></span><span class="delete1">&nbsp;the designated 
type</span>; <span class="insert1">if <I>A</I> is anonymous and <I>D</I> 
is tagged, then the type of the view shall be either <I>D</I>'Class or 
a type covered by&nbsp;</span><span class="insert2"><I>D</I></span><span class="insert1"></span><span class="insert1"><span class="delete2">&nbsp;D</span></span><span class="insert1">;</span> 
if <span class="insert1"><I>D</I> is untagged</span><span class="delete1"><I>&nbsp;A</I>'s 
designated type is not tagged</span>, then the type of the view shall 
be <span class="insert1"><I>D</I></span><span class="delete1">&nbsp;the same</span>, 
and <span class="insert2">either:</span><span class="delete2"></span><span class="delete1">&nbsp;either 
</span><span class="delete2"><I>A</I>'s designated subtype shall&nbsp;</span><span class="insert1"><span class="delete2">either 
</span></span><span class="delete2">statically match the nominal subtype 
of the view</span><span class="insert1"><span class="delete2">&nbsp;or be</span></span><span class="delete2"></span><span class="delete1">, 
or the designated subtype shall be</span><span class="delete2">&nbsp;discriminated 
and unconstrained; <A NAME="I2557"></A></span></div>
<div class="paranum"><a name="p27.1">27.1/2</a></div>
<div class="Indented5NestedBulleted">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00363.TXT">AI95-00363-01</A></I>} 
<span class="insert2">the designated subtype of <I>A</I> shall statically 
match the nominal subtype of the view; or<A NAME="I2558"></A></span></div>
<div class="paranum"><a name="p27.2">27.2/3</a></div>
<div class="Indented5NestedBulleted">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00363.TXT">AI95-00363-01</A></I>} 
<span class="insert2"></span>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0041-1.TXT">AI05-0041-1</A></I>} 
<span class="insert2"><I>D</I> shall be discriminated in its full view 
and unconstrained in any partial view, and the designated subtype of 
<I>A</I> shall be unconstrained.</span><span class="insert3">&nbsp;For the 
purposes of determining within a generic body whether <I>D</I> is unconstrained 
in any partial view, a discriminated subtype is considered to have a 
constrained partial view if it is a descendant of an untagged generic 
formal private or derived type.</span><span class="insert2"></span>&nbsp;</div>
<div class="paranum"><a name="p27.a">27.a</a></div>
<div class="Annotations"><B>Implementation Note:&nbsp;</B>This ensures that 
the dope for an aliased array object can always be stored contiguous 
with it, but need not be if its nominal subtype is constrained.&nbsp;</div>
<div class="paranum"><a name="p27.a.1">27.a.1/1</a></div>
<div class="Annotations"><B>Ramification:&nbsp;</B>{<I><A HREF="defect1.html#8652/0010">8652/0010</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00127.TXT">AI95-00127-01</A></I>} 
<span class="insert1">An access attribute can be used as the controlling 
operand in a dispatching call; see <A HREF="AA-3-9-2.html">3.9.2</A>.</span></div>
<div class="paranum"><a name="p27.a.2">27.a.2/2</a></div>
<div class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00363.TXT">AI95-00363-01</A></I>} 
<span class="insert2">This does not require that types have a partial 
view in order to allow an access attribute of an unconstrained discriminated 
object, only that any partial view that does exist is unconstrained.</span> 
</div>
<div class="paranum"><a name="p28">28/3</a></div>
<div class="Indented4Bulleted">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0041-1.TXT">AI05-0041-1</A></I>} 
The accessibility level of the view shall not be statically deeper than 
that of the access type <I>A</I>.<span class="delete3">&nbsp;In addition to 
the places where Legality Rules normally apply (see <A HREF="AA-12-3.html">12.3</A>), 
this rule applies also in the private part of an instance of a generic 
unit.<A NAME="I2559"></A></span> <A NAME="I2560"></A></div>
<div class="paranum"><a name="p28.a">28.a</a></div>
<div class="Annotations"><B>Ramification:&nbsp;</B>In an instance body, a 
run-time check applies.</div>
<div class="paranum"><a name="p28.b">28.b/2</a></div>
<div class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00230.TXT">AI95-00230-01</A></I>} 
If <I>A</I> is an anonymous<span class="insert2">&nbsp;access-to-object type 
of an access parameter</span><span class="delete2">&nbsp;access type</span>, 
then the view can never have a deeper accessibility level than <I>A</I><span class="insert2">. 
The same is true for an anonymous access-to-object type of an access 
discriminant</span>, except when X'Access is used to initialize an access 
discriminant of an object created by an <SPAN Class="swiss"><A HREF="AA-4-8.html#S0143">allocator</A></SPAN>. 
The latter case is illegal if the accessibility level of X is statically 
deeper than that of the access type of the <SPAN Class="swiss"><A HREF="AA-4-8.html#S0143">allocator</A></SPAN>; 
a run-time check is needed in the case where the initial value comes 
from an access parameter.<span class="insert2">&nbsp;Other anonymous access-to-object 
types have &quot;normal&quot; accessibility checks.</span>&nbsp;</div>
<div class="paranum"><a name="p28.1">28.1/3</a></div>
<div class="WideHanging-Body">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0041-1.TXT">AI05-0041-1</A></I>} 
<span class="insert3">In addition to the places where Legality Rules 
normally apply (see <A HREF="AA-12-3.html">12.3</A>), these requirements 
apply also in the private part of an instance of a generic unit.<A NAME="I2561"></A></span></div>
<div class="paranum"><a name="p29">29</a></div>
<div class="WideHanging-Body"><A NAME="I2562"></A><A NAME="I2563"></A><A NAME="I2564"></A>A 
check is made that the accessibility level of X is not deeper than that 
of the access type <I>A</I>. If this check fails, Program_Error is raised. 
</div>
<div class="paranum"><a name="p29.a">29.a/2</a></div>
<div class="Annotations"><B>Ramification:&nbsp;</B>The check is needed for 
access parameters <span class="insert2">&nbsp;of an access-to-object type</span> 
and in instance bodies.</div>
<div class="paranum"><a name="p29.a.1">29.a.1/3</a></div>
<div class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0024-1.TXT">AI05-0024-1</A></I>} 
<span class="insert3">Because there are no access parameters permitted 
for task entries, the accessibility levels are always comparable. We 
would have to switch to the terminology used in <A HREF="AA-4-8.html">4.8</A> 
and <A HREF="AA-6-5.html">6.5</A> based on inclusion within masters if 
we relax this restriction. That might introduce unacceptable distributed 
overhead.</span>&nbsp;</div>
<div class="paranum"><a name="p29.b">29.b/3</a></div>
<div class="Annotations"><B>Implementation Note:&nbsp;</B>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0148-1.TXT">AI05-0148-1</A></I>} 
This check requires that some indication of lifetime is passed as an 
implicit parameter along with access parameters<span class="insert2">&nbsp;of an access-to-object type</span>.<span class="insert3">&nbsp;A similar indication 
is required for stand-alone objects of anonymous access-to-object types.</span> No 
such requirement applies to <span class="insert2">other anonymous access 
types</span><span class="delete2">&nbsp;access discriminants</span>, since 
the checks associated with them are all compile-time checks.&nbsp;</div>
<div class="paranum"><a name="p30">30</a></div>
<div class="WideHanging-Body"><A NAME="I2565"></A>If the nominal subtype 
of X does not statically match the designated subtype of <I>A</I>, a 
view conversion of X to the designated subtype is evaluated (which might 
raise Constraint_Error &mdash; see <A HREF="AA-4-6.html">4.6</A>) and 
the value of X'Access designates that view.&nbsp;</div>
<div class="paranum"><a name="p31">31</a></div>
<div class="Normal">The following attribute is defined for a <SPAN Class="swiss"><A HREF="AA-4-1.html#S0093">prefix</A></SPAN> 
P that denotes a subprogram:&nbsp;</div>
<div class="paranum"><a name="p32">32/3</a></div>
<div class="WideHanging-Term">&nbsp;P'Access</div><div class="WideHanging-Body">
<A NAME="I2566"></A><A NAME="I2567"></A>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00229.TXT">AI95-00229-01</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00254.TXT">AI95-00254-01</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0239-1.TXT">AI05-0239-1</A></I>} 
P'Access yields an access value that designates the subprogram denoted 
by P. The type of P'Access is an access-to-subprogram type (<I>S</I>), 
as determined by the expected type. <A NAME="I2568"></A>The accessibility 
level of P shall not be statically deeper than that of <I>S</I>. <A NAME="I2569"></A>In 
addition to the places where Legality Rules normally apply (see <A HREF="AA-12-3.html">12.3</A>), 
this rule applies also in the private part of an instance of a generic 
unit. The profile of P shall be <span class="insert3">subtype conformant</span><span class="delete3">&nbsp;subtype-conformant</span> 
with the designated profile of <I>S</I>, and shall not be Intrinsic. 
<A NAME="I2570"></A>If the subprogram denoted by P is declared within 
a generic <span class="insert2">unit, and the expression P'Access occurs 
within the body of that generic unit or within the body of a generic 
unit declared within the declarative region of the generic unit, then 
the ultimate ancestor of <I>S</I> shall be either a nonformal type declared 
within the generic unit or an anonymous access type of an access parameter.</span><span class="delete2">&nbsp;body, 
<I>S</I> shall be declared within the generic body.</span></div>
<div class="paranum"><a name="p32.a">32.a/2</a></div>
<div class="Annotations"><B>Discussion:&nbsp;</B>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00229.TXT">AI95-00229-01</A></I>} 
The part about generic bodies is worded in terms of the denoted subprogram, 
not the denoted view; this implies that renaming is invisible to this 
part of the rule.<span class="insert2">&nbsp;&ldquo;Declared within the declarative 
region of the generic&rdquo; is referring to child and nested generic 
units.</span> This rule is partly to prevent contract model problems 
with respect to the accessibility rules, and partly to ease shared-generic-body 
implementations, in which a subprogram declared in an instance needs 
to have a different calling convention from other subprograms with the 
same profile.</div>
<div class="paranum"><a name="p32.b">32.b</a></div>
<div class="Annotations">Overload resolution ensures only that the profile 
is <span class="insert3">type conformant</span><span class="delete3">&nbsp;type-conformant</span>. 
This rule specifies that subtype conformance is required (which also 
requires matching calling conventions). P cannot denote an entry because 
access-to-subprogram types never have the <I>entry</I> calling convention. 
P cannot denote an enumeration literal or an attribute function because 
these have intrinsic calling conventions.&nbsp;</div>

<H4 Class="centered">Legality Rules</H4>
<div class="paranum"><a name="p32.1">32.1/3</a></div>
<div class="Normal" style="margin-bottom: 0.4em">&nbsp;&nbsp;&nbsp;{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0188-1.TXT">AI05-0188-1</A></I>} 
<span class="insert3">An <SPAN Class="swiss"><A HREF="AA-4-4.html#S0117">expression</A></SPAN> 
is said to have <I>distributed accessibility</I> if it is<A NAME="I2571"></A><A NAME="I2572"></A></span></div>
<div class="paranum"><a name="p32.2">32.2/3</a></div>
<div class="Bulleted"><span class="insert3">a <SPAN Class="swiss"><A HREF="AA-4-5-7.html#S0133">conditional_expression</A></SPAN> 
(see <A HREF="AA-4-5-7.html">4.5.7</A>); or</span></div>
<div class="paranum"><a name="p32.3">32.3/3</a></div>
<div class="Bulleted"><span class="insert3">a view conversion, <SPAN Class="swiss"><A HREF="AA-4-7.html#S0142">qualified_expression</A></SPAN>, 
or parenthesized expression whose operand has distributed accessibility.</span> 
</div>
<div class="paranum"><a name="p32.4">32.4/3</a></div>
<div class="Normal">&nbsp;&nbsp;&nbsp;{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0188-1.TXT">AI05-0188-1</A></I>} 
<span class="insert3">The statically deeper relationship does not apply 
to the accessibility level of an <SPAN Class="swiss"><A HREF="AA-4-4.html#S0117">expression</A></SPAN> 
having distributed accessibility; that is, such an accessibility level 
is not considered to be statically deeper, nor statically shallower, 
than any other.</span></div>
<div class="paranum"><a name="p32.5">32.5/3</a></div>
<div class="Normal">&nbsp;&nbsp;&nbsp;{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0188-1.TXT">AI05-0188-1</A></I>} 
<span class="insert3">Any static accessibility requirement that is imposed 
on an <SPAN Class="swiss"><A HREF="AA-4-4.html#S0117">expression</A></SPAN> 
that has distributed accessibility (or on its type) is instead imposed 
on the <I>dependent_</I><SPAN Class="swiss"><A HREF="AA-4-4.html#S0117">expression</A></SPAN>s 
of the underlying <SPAN Class="swiss"><A HREF="AA-4-5-7.html#S0133">conditional_expression</A></SPAN>. 
This rule is applied recursively if a <I>dependent_</I><SPAN Class="swiss"><A HREF="AA-4-4.html#S0117">expression</A></SPAN> 
also has distributed accessibility.</span></div>
<div class="paranum"><a name="p32.c">32.c/3</a></div>
<div class="Annotations"><span class="insert3"><B>Discussion:&nbsp;</B>This 
means that any Legality Rule requiring that the accessibility level of 
an <SPAN Class="swiss"><A HREF="AA-4-4.html#S0117">expression</A></SPAN> 
(or that of the type of an <SPAN Class="swiss"><A HREF="AA-4-4.html#S0117">expression</A></SPAN>) 
shall or shall not be statically deeper than some other level also applies, 
in the case where the <SPAN Class="swiss"><A HREF="AA-4-4.html#S0117">expression</A></SPAN> 
has distributed accessibility, to each <I>dependent_</I><SPAN Class="swiss"><A HREF="AA-4-4.html#S0117">expression</A></SPAN> 
of the underlying <SPAN Class="swiss"><A HREF="AA-4-5-7.html#S0133">conditional_expression</A></SPAN>.</span> 
</div>
<div class="NotesHeader">NOTES</div>
<div class="paranum"><a name="p33">33</a></div>
<div class="Notes">88&nbsp;&nbsp;The Unchecked_Access attribute yields 
the same result as the Access attribute for objects, but has fewer restrictions 
(see <A HREF="AA-13-10.html">13.10</A>). There are other predefined operations 
that yield access values: an <SPAN Class="swiss"><A HREF="AA-4-8.html#S0143">allocator</A></SPAN> 
can be used to create an object, and return an access value that designates 
it (see <A HREF="AA-4-8.html">4.8</A>); evaluating the literal <B>null</B> 
yields a null access value that designates no entity at all (see <A HREF="AA-4-2.html">4.2</A>).</div>
<div class="paranum"><a name="p34">34/2</a></div>
<div class="Notes">89&nbsp;&nbsp;{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00230.TXT">AI95-00230-01</A></I>} 
<A NAME="I2573"></A>The predefined operations of an access type also 
include the assignment operation, qualification, and membership tests. 
Explicit conversion is allowed between general access types with matching 
designated subtypes; explicit conversion is allowed between access-to-subprogram 
types with subtype conformant profiles (see <A HREF="AA-4-6.html">4.6</A>). 
<A NAME="I2574"></A>Named access types have predefined equality operators; 
anonymous access types do not<span class="insert2">, but they can use 
the predefined equality operators for <I>universal_access</I>&nbsp;</span>(see 
<A HREF="AA-4-5-2.html">4.5.2</A>).&nbsp;</div>
<div class="paranum"><a name="p34.a">34.a/2</a></div>
<div class="Annotations"><B>Reason:&nbsp;</B>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00230.TXT">AI95-00230-01</A></I>} 
<span class="insert2">Anonymous access types can use the universal access 
equality operators declared in Standard, while named access types cannot 
for compatibility reasons.&nbsp;</span>By not having equality operators for 
anonymous access types, we eliminate the need to specify exactly where 
the predefined operators for anonymous access types would be defined, 
as well as the need for an implementer to insert an implicit declaration 
for &quot;=&quot;, etc. at the appropriate place in their symbol table. 
Note that <span class="insert2">&quot;:=&quot;,&nbsp;</span>'Access<span class="insert2">,</span> 
and &quot;.<B>all</B>&quot; are defined<span class="delete2">, and &quot;:=&quot; 
is defined though useless since all instances are constant. The literal 
<B>null</B> is also defined for the purposes of overload resolution, 
but is disallowed by a Legality Rules of this subclause</span>.&nbsp;</div>
<div class="paranum"><a name="p35">35</a></div>
<div class="Notes">90&nbsp;&nbsp;The object or subprogram designated 
by an access value can be named with a dereference, either an <SPAN Class="swiss"><A HREF="AA-4-1.html#S0094">explicit_dereference</A></SPAN> 
or an <SPAN Class="swiss"><A HREF="AA-4-1.html#S0095">implicit_dereference</A></SPAN>. 
See <A HREF="AA-4-1.html">4.1</A>.</div>
<div class="paranum"><a name="p36">36</a></div>
<div class="Notes">91&nbsp;&nbsp;A call through the dereference of an 
access-to-subprogram value is never a dispatching call.&nbsp;</div>
<div class="paranum"><a name="p36.a">36.a</a></div>
<div class="Annotations"><B>Proof:&nbsp;</B>See <A HREF="AA-3-9-2.html">3.9.2</A>. 
</div>
<div class="paranum"><a name="p37">37/2</a></div>
<div class="Notes">92&nbsp;&nbsp;{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00254.TXT">AI95-00254-01</A></I>} 
<A NAME="I2575"></A><A NAME="I2576"></A><span class="insert2">The</span><span class="delete2">&nbsp;The 
accessibility rules imply that it is not possible to use the</span> Access 
attribute<span class="insert2">&nbsp;for subprograms and parameters of an 
anonymous access-to-subprogram type may together be used</span> to implement 
&ldquo;downward closures&rdquo; &mdash; that is, to pass a more-nested 
subprogram as a parameter to a less-nested subprogram, as might be <span class="insert2">appropriate</span><span class="delete2">&nbsp;desired 
for example</span> for an iterator abstraction<span class="insert2">&nbsp;or numerical integration. Downward</span><span class="delete2">. Instead, 
downward</span> closures can <span class="insert2">also&nbsp;</span>be implemented 
using generic formal subprograms (see <A HREF="AA-12-6.html">12.6</A>). 
Note that Unchecked_Access is not allowed for subprograms.</div>
<div class="paranum"><a name="p38">38</a></div>
<div class="Notes">93&nbsp;&nbsp;Note that using an access-to-class-wide 
tagged type with a dispatching operation is a potentially more structured 
alternative to using an access-to-subprogram type.</div>
<div class="paranum"><a name="p39">39</a></div>
<div class="Notes">94&nbsp;&nbsp;An implementation may consider two access-to-subprogram 
values to be unequal, even though they designate the same subprogram. 
This might be because one points directly to the subprogram, while the 
other points to a special prologue that performs an Elaboration_Check 
and then jumps to the subprogram. See <A HREF="AA-4-5-2.html">4.5.2</A>. 
</div>
<div class="paranum"><a name="p39.a">39.a</a></div>
<div class="Annotations"><B>Ramification:&nbsp;</B>If equality of access-to-subprogram 
values is important to the logic of a program, a reference to the Access 
attribute of a subprogram should be evaluated only once and stored in 
a global constant for subsequent use and equality comparison.</div>

<H4 Class="centered">Examples</H4>
<div class="paranum"><a name="p40">40</a></div>
<div class="Normal" style="margin-bottom: 0.4em"><I>Example of use of 
the Access attribute:</I>&nbsp;</div>
<div class="paranum"><a name="p41">41</a></div>
<div class="Examples">Martha&nbsp;:&nbsp;Person_Name&nbsp;:=&nbsp;<B>new</B>&nbsp;Person(F);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--<SPAN Class="roman"><I>&nbsp;see&nbsp;<A HREF="AA-3-10-1.html">3.10.1</A></I></SPAN><BR>
Cars&nbsp;&nbsp;&nbsp;:&nbsp;<B>array</B>&nbsp;(1..2)&nbsp;<B>of</B>&nbsp;<B>aliased</B>&nbsp;Car;<BR>
&nbsp;&nbsp;&nbsp;...<BR>
Martha.Vehicle&nbsp;:=&nbsp;Cars(1)'Access;<BR>
George.Vehicle&nbsp;:=&nbsp;Cars(2)'Access;</div>

<H4 Class="centered">Extensions to Ada 83</H4>
<div class="paranum"><a name="p41.a">41.a</a></div>
<div class="Annotations"><A NAME="I2577"></A>We no longer make things 
like 'Last and &quot;.component&quot; (basic) operations of an access 
type that need to be &quot;declared&quot; somewhere. Instead, implicit 
dereference in a <SPAN Class="swiss"><A HREF="AA-4-1.html#S0093">prefix</A></SPAN> 
takes care of them all. This means that there should never be a case 
when X.<B>all</B>'Last is legal while X'Last is not. See AI83-00154. 
</div>

<H4 Class="centered">Incompatibilities With Ada 95</H4>
<div class="paranum"><a name="p41.b">41.b/2</a></div>
<div class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00363.TXT">AI95-00363-01</A></I>} 
<span class="insert2"><A NAME="I2578"></A> Aliased variables are not 
necessarily constrained in Ada 2005 (see <A HREF="AA-3-6.html">3.6</A>). 
Therefore, a subcomponent of an aliased variable may disappear or change 
shape, and taking 'Access of such a subcomponent thus is illegal, while 
the same operation would have been legal in Ada 95. Note that most allocated 
objects are still constrained by their initial value (see <A HREF="AA-4-8.html">4.8</A>), 
and thus legality of 'Access didn't change for them. For example:</span> 
</div>
<div class="paranum"><a name="p41.c">41.c/2</a></div>
<div class="SmallExamples" style="margin-bottom: 0.4em"><span class="insert2"><B>type</B>&nbsp;T1&nbsp;(D1&nbsp;:&nbsp;Boolean&nbsp;:=&nbsp;False)&nbsp;<B>is</B><BR>
&nbsp;&nbsp;&nbsp;<B>record</B><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<B>case</B>&nbsp;D1&nbsp;<B>is</B><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<B>when</B>&nbsp;False&nbsp;=&gt;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;C1&nbsp;:&nbsp;<B>aliased</B>&nbsp;Integer;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<B>when</B>&nbsp;True&nbsp;=&gt;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<B>null</B>;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<B>end</B>&nbsp;<B>case</B>;<BR>
&nbsp;&nbsp;&nbsp;<B>end</B>&nbsp;<B>record</B>;<BR>
<B>type</B>&nbsp;Acc_Int&nbsp;<B>is&nbsp;access&nbsp;all</B>&nbsp;Integer;</span></div>
<div class="paranum"><a name="p41.d">41.d/2</a></div>
<div class="SmallExamples"><span class="insert2">A_T&nbsp;:&nbsp;<B>aliased</B>&nbsp;T1;<BR>
Ptr&nbsp;:&nbsp;Acc_Int&nbsp;:=&nbsp;A_T.C1'Access;&nbsp;--&nbsp;<SPAN Class="roman"><I>Illegal&nbsp;in&nbsp;Ada&nbsp;2005,&nbsp;legal&nbsp;in&nbsp;Ada&nbsp;95</I></SPAN><BR>
A_T&nbsp;:=&nbsp;(D1&nbsp;=&gt;&nbsp;True);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--&nbsp;<SPAN Class="roman"><I>Raised&nbsp;Constraint_Error&nbsp;in&nbsp;Ada&nbsp;95,&nbsp;but&nbsp;does&nbsp;not</I></SPAN><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--&nbsp;<SPAN Class="roman"><I>in&nbsp;Ada&nbsp;2005,&nbsp;so&nbsp;Ptr&nbsp;would&nbsp;become&nbsp;invalid&nbsp;when&nbsp;this</I></SPAN><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--&nbsp;<SPAN Class="roman"><I>is&nbsp;assigned&nbsp;(thus&nbsp;Ptr&nbsp;is&nbsp;illegal).</I></SPAN></span></div>
<div class="paranum"><a name="p41.e">41.e/2</a></div>
<div class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00363.TXT">AI95-00363-01</A></I>} 
<span class="insert2">If a discriminated full type has a partial view 
(private type) that is constrained, we do not allow 'Access on objects 
to create a value of an object of an access-to-unconstrained type. Ada 
95 allowed this attribute and various access subtypes, requiring that 
the heap object be constrained and thus making details of the implementation 
of the private type visible to the client of the private type. See <A HREF="AA-4-8.html">4.8</A> 
for more on this topic.</span></div>
<div class="paranum"><a name="p41.f">41.f/2</a></div>
<div class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00229.TXT">AI95-00229-01</A></I>} 
<span class="insert2"></span>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00254.TXT">AI95-00254-01</A></I>} 
<span class="insert2"><B>Amendment Correction:</B> Taking 'Access of 
a subprogram declared in a generic unit in the body of that generic is 
no longer allowed. Such references can easily be used to create dangling 
pointers, as Legality Rules are not rechecked in instance bodies. At 
the same time, the rules were loosened a bit where that is harmless, 
and also to allow any routine to be passed to an access parameter of 
an access-to-subprogram type. The now illegal uses of 'Access can almost 
always be moved to the private part of the generic unit, where they are 
still legal (and rechecked upon instantiation for possibly dangling pointers).</span> 
</div>

<H4 Class="centered">Extensions to Ada 95</H4>
<div class="paranum"><a name="p41.g">41.g/2</a></div>
<div class="Annotations">{<I><A HREF="defect1.html#8652/0010">8652/0010</A></I>} 
<span class="insert2"></span>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00127.TXT">AI95-00127-01</A></I>} 
<span class="insert2"><B>Corrigendum:</B> <A NAME="I2579"></A>Access 
attributes of objects of class-wide types can be used as the controlling 
parameter in a dispatching calls (see <A HREF="AA-3-9-2.html">3.9.2</A>). 
This was an oversight in Ada 95.</span></div>
<div class="paranum"><a name="p41.h">41.h/2</a></div>
<div class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00235.TXT">AI95-00235-01</A></I>} 
<span class="insert2"><B>Amendment Correction:</B> The type of the prefix 
can now be used in resolving Access attributes. This allows more uses 
of the Access attribute to resolve. For example:</span>&nbsp;</div>
<div class="paranum"><a name="p41.i">41.i/2</a></div>
<div class="SmallExamples"><span class="insert2"><B>type</B>&nbsp;Int_Ptr&nbsp;<B>is&nbsp;access&nbsp;all</B>&nbsp;Integer;<BR>
<B>type</B>&nbsp;Float_Ptr&nbsp;<B>is&nbsp;access&nbsp;all</B>&nbsp;Float;</span></div>
<div class="paranum"><a name="p41.j">41.j/2</a></div>
<div class="SmallExamples"><span class="insert2"><B>function</B>&nbsp;Zap&nbsp;(Val&nbsp;:&nbsp;Int_Ptr)&nbsp;<B>return</B>&nbsp;Float;<BR>
<B>function</B>&nbsp;Zap&nbsp;(Val&nbsp;:&nbsp;Float_Ptr)&nbsp;<B>return</B>&nbsp;Float;</span></div>
<div class="paranum"><a name="p41.k">41.k/2</a></div>
<div class="SmallExamples"><span class="insert2">Value&nbsp;:&nbsp;<B>aliased</B>&nbsp;Integer&nbsp;:=&nbsp;10;</span></div>
<div class="paranum"><a name="p41.l">41.l/2</a></div>
<div class="SmallExamples"><span class="insert2">Result1&nbsp;:&nbsp;Float&nbsp;:=&nbsp;Zap&nbsp;(Value'access);&nbsp;--&nbsp;<SPAN Class="roman"><I>Ambiguous&nbsp;in&nbsp;Ada&nbsp;95;&nbsp;resolves&nbsp;in&nbsp;Ada&nbsp;2005.</I></SPAN><BR>
Result2&nbsp;:&nbsp;Float&nbsp;:=&nbsp;Zap&nbsp;(Int_Ptr'(Value'access));&nbsp;--&nbsp;<SPAN Class="roman"><I>Resolves&nbsp;in&nbsp;Ada&nbsp;95&nbsp;and&nbsp;Ada&nbsp;2005.</I></SPAN></span></div>
<div class="paranum"><a name="p41.m">41.m/2</a></div>
<div class="Annotations"><span class="insert2">This change is upward 
compatible; any expression that does not resolve by the new rules would 
have failed a Legality Rule.</span>&nbsp;</div>

<H4 Class="centered">Wording Changes from Ada 95</H4>
<div class="paranum"><a name="p41.n">41.n/2</a></div>
<div class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00162.TXT">AI95-00162-01</A></I>} 
<span class="insert2">Adjusted the wording to reflect the fact that expressions 
and function calls are masters.</span></div>
<div class="paranum"><a name="p41.o">41.o/2</a></div>
<div class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00230.TXT">AI95-00230-01</A></I>} 
<span class="insert2"></span>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00254.TXT">AI95-00254-01</A></I>} 
<span class="insert2"></span>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-10318.TXT">AI95-00318-02</A></I>} 
<span class="insert2"></span>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00385.TXT">AI95-00385-01</A></I>} 
<span class="insert2"></span>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00416.TXT">AI95-00416-01</A></I>} 
<span class="insert2">Defined the accessibility of the various new kinds 
and uses of anonymous access types.</span>&nbsp;</div>

<H4 Class="centered">Incompatibilities With Ada 2005</H4>
<div class="paranum"><a name="p41.p">41.p/3</a></div>
<div class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0008-1.TXT">AI05-0008-1</A></I>} 
<span class="insert3"><A NAME="I2580"></A><B>Correction:</B> Simplified 
the description of when a discriminant-dependent component is allowed 
as the prefix of 'Access to when the object is known to be constrained. 
This fixes a confusion as to whether a subcomponent of an object that 
is not certain to be constrained can be used as a prefix of 'Access. 
The fix introduces an incompatibility, as the rule did not apply in Ada 
95 if the prefix was a constant; but it now applies no matter what kind 
of object is involved. The incompatibility is not too bad, since most 
kinds of constants are known to be constrained.</span></div>
<div class="paranum"><a name="p41.q">41.q/3</a></div>
<div class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0041-1.TXT">AI05-0041-1</A></I>} 
<span class="insert3"><B>Correction:</B> Corrected the checks for the 
constrainedness of the prefix of the Access attribute so that assume-the-worst 
is used in generic bodies. This may make some programs illegal, but those 
programs were at risk having objects disappear while valid access values 
still pointed at them.</span>&nbsp;</div>

<H4 Class="centered">Extensions to Ada 2005</H4>
<div class="paranum"><a name="p41.r">41.r/3</a></div>
<div class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0082-1.TXT">AI05-0082-1</A></I>} 
<span class="insert3"><A NAME="I2581"></A><B>Correction:</B> Eliminated 
the static accessibility definition for generic formal types, as the 
actual can be more or less nested than the generic itself. This allows 
programs that were illegal for Ada 95 and for Ada 2005.</span></div>
<div class="paranum"><a name="p41.s">41.s/3</a></div>
<div class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0148-1.TXT">AI05-0148-1</A></I>} 
<span class="insert3"></span>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0253-1.TXT">AI05-0253-1</A></I>} 
<span class="insert3">Eliminate the static accessibility definition for 
stand-alone objects of anonymous access-to-object types. This allows 
such objects to be used as temporaries without causing accessibility 
problems.</span>&nbsp;</div>

<H4 Class="centered">Wording Changes from Ada 2005</H4>
<div class="paranum"><a name="p41.t">41.t/3</a></div>
<div class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0014-1.TXT">AI05-0014-1</A></I>} 
<span class="insert3"><B>Correction:</B> Corrected the rules so that 
the accessibility of the object designated by an access object is that 
of the access type, even when no dereference is given. The accessibility 
was not specified in the past. This correction applies to both Ada 95 
and Ada 2005.</span></div>
<div class="paranum"><a name="p41.u">41.u/3</a></div>
<div class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0024-1.TXT">AI05-0024-1</A></I>} 
<span class="insert3"><B>Correction:</B> Corrected accessibility rules 
for access discriminants so that no cases are omitted.</span></div>
<div class="paranum"><a name="p41.v">41.v/3</a></div>
<div class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0051-1.TXT">AI05-0051-1</A></I>} 
<span class="insert3"></span>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0234-1.TXT">AI05-0234-1</A></I>} 
<span class="insert3"></span>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0235-1.TXT">AI05-0235-1</A></I>} 
<span class="insert3"></span>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0284-1.TXT">AI05-0284-1</A></I>} 
<span class="insert3"><B>Correction:</B> Corrected accessibility rules 
for anonymous access return types and access discriminants in return 
statements.</span></div>
<div class="paranum"><a name="p41.w">41.w/3</a></div>
<div class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0066-1.TXT">AI05-0066-1</A></I>} 
<span class="insert3"><B>Correction:</B> Changed coextension rules so 
that coextensions that belong to an anonymous object are transfered to 
the ultimate object.</span></div>
<div class="paranum"><a name="p41.x">41.x/3</a></div>
<div class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0142-4.TXT">AI05-0142-4</A></I>} 
<span class="insert3"></span>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0188-1.TXT">AI05-0188-1</A></I>} 
<span class="insert3"></span>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0235-1.TXT">AI05-0235-1</A></I>} 
<span class="insert3">Defined the accessibility of explicitly aliased 
parameters (see <A HREF="AA-6-1.html">6.1</A>) and <SPAN Class="swiss"><A HREF="AA-4-5-7.html#S0133">conditional_expression</A></SPAN>s 
(see <A HREF="AA-4-5-7.html">4.5.7</A>).</span></div>
<div class="paranum"><a name="p41.y">41.y/3</a></div>
<div class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0234-1.TXT">AI05-0234-1</A></I>} 
<span class="insert3"><B>Correction:</B> Defined the term &ldquo;master 
of the call&rdquo; to simplify other wording, especially that for the 
accessibility checks associated with return statements and explicitly 
aliased parameters.</span></div>
<div class="paranum"><a name="p41.z">41.z/3</a></div>
<div class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0270-1.TXT">AI05-0270-1</A></I>} 
<span class="insert3"><B>Correction:</B> Defined the (omitted) accessibility 
level of null values when those are passed as the actual of an access-to-object 
parameter.</span>&nbsp;</div>

</div>
<div class="navig"><A HREF="AA-TOC.html">Contents</A>&nbsp;
&nbsp;<A HREF="AA-0-4.html">Index</A>&nbsp;
&nbsp;<A HREF="AA-STDS.html">References</A>&nbsp;
&nbsp;<A HREF="AA-SRCH.html">Search</A>&nbsp;
&nbsp;<A HREF="AA-3-10-1.html">Previous</A>&nbsp;
&nbsp;<A HREF="AA-3-11.html">Next</A>&nbsp;
</div>
<DIV Style="margin-top:0.0em">
<SPAN Style="vertical-align: middle; font-size:120%">Ada 2005 and 2012 Editions sponsored in part by <SPAN Style="font-size: 125%"><A HREF="http://www.ada-europe.org/"><B>Ada-Europe</B></A></SPAN></SPAN></DIV>
</BODY>
</HTML>
