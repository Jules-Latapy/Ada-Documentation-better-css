<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<HTML>
<HEAD>
    <TITLE>Pragmas and Program Units</TITLE>
    <META http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
    <META NAME="Author" CONTENT="JTC1/SC22/WG9/ARG, by Randall Brukardt, ARG Editor">
    <META NAME="GENERATOR" CONTENT="Arm_Form.Exe, Ada Reference Manual generator">
    <link rel="stylesheet" href="../styles.css">
	<link rel="icon" href="../logo.svg">
</HEAD>
<BODY TEXT="#000000" BGCOLOR="#FFFFF0" LINK="#000080" VLINK="#330033" ALINK="#0000FF">
<DIV><B><SPAN Style="font-size:200%; color: rgb(0,51,153)">Annotated</SPAN><SPAN Style="font-size:200%; color: rgb(0,0,102)">&nbsp;Ada Reference Manual</SPAN></B> &mdash; <A HREF="AA-TTL.html"><B>Legal Information</B></A></DIV>
<div class="navig"><A HREF="AA-TOC.html">Contents</A>&nbsp;
&nbsp;<A HREF="AA-0-4.html">Index</A>&nbsp;
&nbsp;<A HREF="AA-STDS.html">References</A>&nbsp;
&nbsp;<A HREF="../RM-SRCH.html">Search</A>&nbsp;
&nbsp;<A HREF="AA-10-1-4.html">Previous</A>&nbsp;
&nbsp;<A HREF="AA-10-1-6.html">Next</A>&nbsp;
<img SRC="../logo.svg" class="adaLogo">
</div>
<div class="main">
<H1>10.1.5 Pragmas and Program Units</H1>
<div class="paranum"><a name="p1">1</a></div>
<div class="Normal">[This subclause discusses pragmas related to program 
units, library units, and <SPAN Class="swiss"><A HREF="AA-10-1-1.html#S0246">compilation</A></SPAN>s.] 
</div>

<H4 Class="centered">Name Resolution Rules</H4>
<div class="paranum"><a name="p2">2</a></div>
<div class="Normal"><A NAME="I4949"></A><A NAME="I4950"></A>Certain <SPAN Class="swiss"><A HREF="AA-2-8.html#S0019">pragma</A></SPAN>s 
are defined to be <I>program unit pragmas</I>. <A NAME="I4951"></A>A 
<SPAN Class="swiss"><A HREF="AA-4-1.html#S0091">name</A></SPAN> given 
as the argument of a program unit pragma shall resolve to denote the 
declarations or renamings of one or more program units that occur immediately 
within the declarative region or <SPAN Class="swiss"><A HREF="AA-10-1-1.html#S0246">compilation</A></SPAN> 
in which the <SPAN Class="swiss"><A HREF="AA-2-8.html#S0019">pragma</A></SPAN> 
immediately occurs, or it shall resolve to denote the declaration of 
the immediately enclosing program unit (if any); the <SPAN Class="swiss"><A HREF="AA-2-8.html#S0019">pragma</A></SPAN> 
applies to the denoted program unit(s). If there are no <SPAN Class="swiss"><A HREF="AA-4-1.html#S0091">name</A></SPAN>s 
given as arguments, the <SPAN Class="swiss"><A HREF="AA-2-8.html#S0019">pragma</A></SPAN> 
applies to the immediately enclosing program unit.&nbsp;</div>
<div class="paranum"><a name="p2.a">2.a</a></div>
<div class="Annotations"><B>Ramification:&nbsp;</B>The fact that this is a 
Name Resolution Rule means that the <SPAN Class="swiss"><A HREF="AA-2-8.html#S0019">pragma</A></SPAN> 
will not apply to declarations from outer declarative regions.&nbsp;</div>

<H4 Class="centered">Legality Rules</H4>
<div class="paranum"><a name="p3">3</a></div>
<div class="Normal" style="margin-bottom: 0.4em">A program unit pragma 
shall appear in one of these places:&nbsp;</div>
<div class="paranum"><a name="p4">4</a></div>
<div class="Bulleted">At the place of a <SPAN Class="swiss"><A HREF="AA-10-1-1.html#S0247">compilation_unit</A></SPAN>, 
in which case the <SPAN Class="swiss"><A HREF="AA-2-8.html#S0019">pragma</A></SPAN> 
shall immediately follow in the same <SPAN Class="swiss"><A HREF="AA-10-1-1.html#S0246">compilation</A></SPAN> 
(except for other <SPAN Class="swiss"><A HREF="AA-2-8.html#S0019">pragma</A></SPAN>s) 
a <SPAN Class="swiss"><A HREF="AA-10-1-1.html#S0249">library_unit_declaration</A></SPAN> 
that is a <SPAN Class="swiss"><A HREF="AA-6-1.html#S0163">subprogram_declaration</A></SPAN>, 
<SPAN Class="swiss"><A HREF="AA-12-1.html#S0271">generic_subprogram_declaration</A></SPAN>, 
or <SPAN Class="swiss"><A HREF="AA-12-3.html#S0275">generic_instantiation</A></SPAN>, 
and the <SPAN Class="swiss"><A HREF="AA-2-8.html#S0019">pragma</A></SPAN> 
shall have an argument that is a <SPAN Class="swiss"><A HREF="AA-4-1.html#S0091">name</A></SPAN> 
denoting that declaration.&nbsp;</div>
<div class="paranum"><a name="p4.a">4.a</a></div>
<div class="Annotations"><B>Ramification:&nbsp;</B>The <SPAN Class="swiss"><A HREF="AA-4-1.html#S0091">name</A></SPAN> 
has to denote the immediately preceding <SPAN Class="swiss"><A HREF="AA-10-1-1.html#S0249">library_unit_declaration</A></SPAN>. 
</div>
<div class="paranum"><a name="p5">5/1</a></div>
<div class="Bulleted">{<I><A HREF="defect1.html#8652/0033">8652/0033</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00136.TXT">AI95-00136-01</A></I>} 
Immediately within the <span class="insert1">visible part</span><span class="delete1">&nbsp;declaration</span> 
of a program unit and before any nested declaration<span class="insert1">&nbsp;(but not within a generic formal part)</span>, in which case the argument, 
if any, shall be a <SPAN Class="swiss"><A HREF="AA-4-1.html#S0092">direct_name</A></SPAN> 
that denotes the immediately enclosing program unit declaration.&nbsp;</div>
<div class="paranum"><a name="p5.a">5.a</a></div>
<div class="Annotations"><B>Ramification:&nbsp;</B>The argument is optional 
in this case.&nbsp;</div>
<div class="paranum"><a name="p6">6</a></div>
<div class="Bulleted">At the place of a declaration other than the first, 
of a <SPAN Class="swiss"><A HREF="AA-3-11.html#S0086">declarative_part</A></SPAN> 
or program unit declaration, in which case the <SPAN Class="swiss"><A HREF="AA-2-8.html#S0019">pragma</A></SPAN> 
shall have an argument, which shall be a <SPAN Class="swiss"><A HREF="AA-4-1.html#S0092">direct_name</A></SPAN> 
that denotes one or more of the following (and nothing else): a <SPAN Class="swiss"><A HREF="AA-6-1.html#S0163">subprogram_declaration</A></SPAN>, 
a <SPAN Class="swiss"><A HREF="AA-12-1.html#S0271">generic_subprogram_declaration</A></SPAN>, 
or a <SPAN Class="swiss"><A HREF="AA-12-3.html#S0275">generic_instantiation</A></SPAN>, 
of the same <SPAN Class="swiss"><A HREF="AA-3-11.html#S0086">declarative_part</A></SPAN> 
or program unit declaration.&nbsp;</div>
<div class="paranum"><a name="p6.a">6.a</a></div>
<div class="Annotations"><B>Ramification:&nbsp;</B>If you want to denote a 
<SPAN Class="swiss"><A HREF="AA-6-3.html#S0177">subprogram_body</A></SPAN> 
that is not a completion, or a <SPAN Class="swiss"><A HREF="AA-7-1.html#S0190">package_declaration</A></SPAN>, 
for example, you have to put the <SPAN Class="swiss"><A HREF="AA-2-8.html#S0019">pragma</A></SPAN> 
inside.&nbsp;</div>
<div class="paranum"><a name="p7">7/3</a></div>
<div class="Normal">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0132-1.TXT">AI05-0132-1</A></I>} 
<A NAME="I4952"></A><A NAME="I4953"></A><A NAME="I4954"></A><A NAME="I4955"></A>Certain 
program unit pragmas are defined to be <I>library unit pragmas</I>. <span class="insert3">If 
a library unit pragma applies to a program unit, the program unit shall 
be</span><span class="delete3">&nbsp;The <SPAN Class="swiss"><A HREF="AA-4-1.html#S0091">name</A></SPAN>, 
if any, in a library unit pragma shall denote the declaration of</span> 
a library unit.&nbsp;</div>
<div class="paranum"><a name="p7.a">7.a</a></div>
<div class="Annotations"><B>Ramification:&nbsp;</B>This, together with the 
rules for program unit pragmas above, implies that if a library unit 
pragma applies to a <SPAN Class="swiss"><A HREF="AA-6-1.html#S0163">subprogram_declaration</A></SPAN> 
(and similar things), it has to appear immediately after the <SPAN Class="swiss"><A HREF="AA-10-1-1.html#S0247">compilation_unit</A></SPAN>, 
whereas if the <SPAN Class="swiss"><A HREF="AA-2-8.html#S0019">pragma</A></SPAN> 
applies to a <SPAN Class="swiss"><A HREF="AA-7-1.html#S0190">package_declaration</A></SPAN>, 
a <SPAN Class="swiss"><A HREF="AA-6-3.html#S0177">subprogram_body</A></SPAN> 
that is not a completion (and similar things), it has to appear inside, 
as the first <SPAN Class="swiss"><A HREF="AA-3-11.html#S0087">declarative_item</A></SPAN>. 
</div>

<H4 Class="centered">Static Semantics</H4>
<div class="paranum"><a name="p7.1">7.1/1</a></div>
<div class="Normal">&nbsp;&nbsp;{<I><A HREF="defect1.html#8652/0034">8652/0034</A></I>} 
<span class="insert1"></span>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00041.TXT">AI95-00041-01</A></I>} 
<span class="insert1">A library unit pragma that applies to a generic 
unit does not apply to its instances, unless a specific rule for the 
pragma specifies the contrary.</span>&nbsp;</div>

<H4 Class="centered">Post-Compilation Rules</H4>
<div class="paranum"><a name="p8">8</a></div>
<div class="Normal"><A NAME="I4956"></A><A NAME="I4957"></A>Certain <SPAN Class="swiss"><A HREF="AA-2-8.html#S0019">pragma</A></SPAN>s 
are defined to be <I>configuration pragmas</I>; they shall appear before 
the first <SPAN Class="swiss"><A HREF="AA-10-1-1.html#S0247">compilation_unit</A></SPAN> 
of a <SPAN Class="swiss"><A HREF="AA-10-1-1.html#S0246">compilation</A></SPAN>. 
[They are generally used to select a partition-wide or system-wide option.] 
The <SPAN Class="swiss"><A HREF="AA-2-8.html#S0019">pragma</A></SPAN> 
applies to all <SPAN Class="swiss"><A HREF="AA-10-1-1.html#S0247">compilation_unit</A></SPAN>s 
appearing in the <SPAN Class="swiss"><A HREF="AA-10-1-1.html#S0246">compilation</A></SPAN>, 
unless there are none, in which case it applies to all future <SPAN Class="swiss"><A HREF="AA-10-1-1.html#S0247">compilation_unit</A></SPAN>s 
compiled into the same environment.&nbsp;</div>

<H4 Class="centered">Implementation Permissions</H4>
<div class="paranum"><a name="p9">9/2</a></div>
<div class="Normal">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00212.TXT">AI95-00212-01</A></I>} 
An implementation may <span class="insert2">require that configuration 
pragmas that select partition-wide or system-wide options be compiled</span><span class="delete2">&nbsp;place 
restrictions on configuration pragmas, so long as it allows them</span> 
when the environment contains no <SPAN Class="swiss"><A HREF="AA-10-1-1.html#S0248">library_item</A></SPAN>s 
other than those of the predefined environment. <span class="insert2">In 
this case, the implementation shall still accept configuration pragmas 
in individual compilations that confirm the initially selected partition-wide 
or system-wide options.</span></div>

<H4 Class="centered">Implementation Advice</H4>
<div class="paranum"><a name="p10">10/1</a></div>
<div class="Normal">&nbsp;{<I><A HREF="defect1.html#8652/0034">8652/0034</A></I>} 
<span class="insert1"></span>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00041.TXT">AI95-00041-01</A></I>} 
<span class="insert1">When applied to a generic unit, a program unit 
pragma that is not a library unit pragma should apply to each instance 
of the generic unit for which there is not an overriding pragma applied 
directly to the instance.</span>&nbsp;</div>
<div class="paranum"><a name="p10.a">10.a/2</a></div>
<div class="Annotations"><span class="insert2"><B>Implementation Advice: 
</B></span><span class="insert2">When applied to a generic unit, a program 
unit pragma that is not a library unit pragma should apply to each instance 
of the generic unit for which there is not an overriding pragma applied 
directly to the instance.</span></div>

<H4 Class="centered">Wording Changes from Ada 95</H4>
<div class="paranum"><a name="p10.b">10.b/2</a></div>
<div class="Annotations">{<I><A HREF="defect1.html#8652/0033">8652/0033</A></I>} 
<span class="insert2"></span>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00136.TXT">AI95-00136-01</A></I>} 
<span class="insert2"><B>Corrigendum:</B> The wording was corrected to 
ensure that a program unit pragma cannot appear in private parts or generic 
formal parts.</span></div>
<div class="paranum"><a name="p10.c">10.c/2</a></div>
<div class="Annotations">{<I><A HREF="defect1.html#8652/0034">8652/0034</A></I>} 
<span class="insert2"></span>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00041.TXT">AI95-00041-01</A></I>} 
<span class="insert2"><B>Corrigendum:</B> The wording was clarified to 
explain the meaning of program unit and library unit pragmas in generic 
units.</span></div>
<div class="paranum"><a name="p10.d">10.d/2</a></div>
<div class="Annotations"><span class="insert2">The Implementation Advice 
added by the Corrigendum was moved, as it was not in the normal order. 
(This changes the paragraph number.) It originally was directly after 
the new Static Semantics rule.</span></div>
<div class="paranum"><a name="p10.e">10.e/2</a></div>
<div class="Annotations" style="margin-bottom: 0.4em">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00212.TXT">AI95-00212-01</A></I>} 
<span class="insert2">The permission to place restrictions was clarified 
to:</span>&nbsp;</div>
<div class="paranum"><a name="p10.f">10.f/2</a></div>
<div class="SmallBulleted"><span class="insert2">Ensure that it applies 
only to partition-wide configuration pragmas, not ones like Assertion_Policy 
(see <A HREF="AA-11-4-2.html">11.4.2</A>), which can be different in 
different units; and</span></div>
<div class="paranum"><a name="p10.g">10.g/2</a></div>
<div class="SmallBulleted"><span class="insert2">Ensure that confirming 
pragmas are always allowed.</span>&nbsp;</div>

<H4 Class="centered">Wording Changes from Ada 2005</H4>
<div class="paranum"><a name="p10.h">10.h/3</a></div>
<div class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0132-1.TXT">AI05-0132-1</A></I>} 
<span class="insert3"><B>Correction:</B> A library unit pragma must apply 
directly to a library unit, even if no name is given in the pragma.</span> 
</div>

</div>
<div class="navig"><A HREF="AA-TOC.html">Contents</A>&nbsp;
&nbsp;<A HREF="AA-0-4.html">Index</A>&nbsp;
&nbsp;<A HREF="AA-STDS.html">References</A>&nbsp;
&nbsp;<A HREF="AA-SRCH.html">Search</A>&nbsp;
&nbsp;<A HREF="AA-10-1-4.html">Previous</A>&nbsp;
&nbsp;<A HREF="AA-10-1-6.html">Next</A>&nbsp;
</div>
<DIV Style="margin-top:0.0em">
<SPAN Style="vertical-align: middle; font-size:120%">Ada 2005 and 2012 Editions sponsored in part by <SPAN Style="font-size: 125%"><A HREF="http://www.ada-europe.org/"><B>Ada-Europe</B></A></SPAN></SPAN></DIV>
</BODY>
</HTML>
