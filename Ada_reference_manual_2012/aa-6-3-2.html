<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<HTML>
<HEAD>
    <TITLE>Inline Expansion of Subprograms</TITLE>
    <META http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
    <META NAME="Author" CONTENT="JTC1/SC22/WG9/ARG, by Randall Brukardt, ARG Editor">
    <META NAME="GENERATOR" CONTENT="Arm_Form.Exe, Ada Reference Manual generator">
    <link rel="stylesheet" href="../styles.css">
	<link rel="icon" href="../logo.svg">
</HEAD>
<BODY TEXT="#000000" BGCOLOR="#FFFFF0" LINK="#000080" VLINK="#330033" ALINK="#0000FF">
<DIV><B><SPAN Style="font-size:200%; color: rgb(0,51,153)">Annotated</SPAN><SPAN Style="font-size:200%; color: rgb(0,0,102)">&nbsp;Ada Reference Manual</SPAN></B> &mdash; <A HREF="AA-TTL.html"><B>Legal Information</B></A></DIV>
<div style="margin-top: 0.6em; margin-bottom: 0.0em"><A HREF="AA-TOC.html"><IMG SRC="cont.gif" ALT="Contents" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-0-4.html"><IMG SRC="index.gif" ALT="Index" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-STDS.html"><IMG SRC="lib.gif" ALT="References" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-SRCH.html"><IMG SRC="find.gif" ALT="Search" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-6-3-1.html"><IMG SRC="prev.gif" ALT="Previous" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-6-4.html"><IMG SRC="next.gif" ALT="Next" BORDER=0></A>&nbsp;
</div>
<div class="main">
<H1>6.3.2 Inline Expansion of Subprograms</H1>
<div class="paranum"><a name="p1">1</a></div>
<div class="Normal">[Subprograms may be expanded in line at the call 
site.]&nbsp;</div>
<div class="Normal"><span class="insert3"><SPAN STYLE="font-size: 80%"><I>Paragraphs 
2 through 4 were moved to <A HREF="AA-J.html">Annex J</A>, &ldquo;<A HREF="AA-J.html">Obsolescent 
Features</A>&rdquo;.</I></SPAN></span>&nbsp;</div>

<H4 Class="centered">Syntax</H4>
<div class="paranum"><a name="p2">2/3</a></div>
<div class="Indented1" style="margin-bottom: 0.4em">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0229-1.TXT">AI05-0229-1</A></I>} 
<span class="delete3"><A NAME="I3821"></A><A NAME="I3822"></A>The form 
of a <SPAN Class="swiss"><A HREF="AA-2-8.html#S0019">pragma</A></SPAN> 
Inline, which is a program unit pragma (see <A HREF="AA-10-1-5.html">10.1.5</A>), 
is as follows:</span>&nbsp;</div>
<div class="paranum"><a name="p3">3/3</a></div>
<div class="Indented1">&nbsp;&nbsp;<span class="delete3"><B>pragma</B> 
<A NAME="I3823"></A><A NAME="I3824"></A>Inline(<A NAME="I3825"></A><SPAN Class="swiss"><A HREF="AA-4-1.html#S0091">name</A></SPAN> 
{, <A NAME="I3826"></A><SPAN Class="swiss"><A HREF="AA-4-1.html#S0091">name</A></SPAN>});</span> 
</div>

<H4 Class="centered">Legality Rules</H4>
<div class="paranum"><a name="p4">4/3</a></div>
<div class="Normal">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0229-1.TXT">AI05-0229-1</A></I>} 
<span class="delete3">The <SPAN Class="swiss"><A HREF="AA-2-8.html#S0019">pragma</A></SPAN> 
shall apply to one or more callable entities or generic subprograms.</span> 
</div>

<H4 Class="centered">Static Semantics</H4>
<div class="paranum"><a name="p5">5/3</a></div>
<div class="Normal" style="margin-bottom: 0.4em">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0229-1.TXT">AI05-0229-1</A></I>} 
<span class="insert3"></span><span class="insert3">For</span><span class="delete3">&nbsp;If 
a <SPAN Class="swiss"><A HREF="AA-2-8.html#S0019">pragma</A></SPAN> Inline 
applies to</span> a callable entity<span class="insert3">&nbsp;or</span><span class="delete3">, 
this indicates that inline expansion is desired for all calls to that 
entity. If a <SPAN Class="swiss"><A HREF="AA-2-8.html#S0019">pragma</A></SPAN> 
Inline applies to</span> a generic subprogram, <span class="insert3">the 
following language-defined representation aspect may be specified:</span><span class="delete3">&nbsp;this 
indicates that inline expansion is desired for all calls to all instances 
of that generic subprogram.</span></div>
<div class="paranum"><a name="p5.1">5.1/3</a></div>
<div class="WideHanging-Term">&nbsp;&nbsp;<span class="insert3">Inline</span></div><div class="WideHanging-Body">
<span class="insert3">The type of aspect Inline is Boolean. When aspect 
Inline is True for a callable entity, inline expansion is desired for 
all calls to that entity. When aspect Inline is True for a generic subprogram, 
inline expansion is desired for all calls to all instances of that generic 
subprogram.<A NAME="I3827"></A><A NAME="I3828"></A></span></div>
<div class="paranum"><a name="p5.2">5.2/3</a></div>
<div class="WideHanging-Body"><span class="insert3">If directly specified, 
the <SPAN Class="swiss"><A HREF="AA-13-1-1.html#S0308">aspect_definition</A></SPAN> 
shall be a static expression. [This aspect is never inherited;] if not 
directly specified, the aspect is False.</span></div>
<div class="paranum"><a name="p5.a">5.a/3</a></div>
<div class="Annotations"><span class="insert3"><B>Aspect Description 
for&nbsp;</B></span><span class="insert3"><B>Inline:&nbsp;</B></span><span class="insert3">For 
efficiency, Inline calls are requested for a subprogram.</span></div>
<div class="paranum"><a name="p5.b">5.b/3</a></div>
<div class="Annotations" style="margin-bottom: 0.4em"><SPAN STYLE="font-size: 80%"><I>This 
paragraph was deleted.</I></SPAN><span class="delete3"><B>Ramification: 
</B></span>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0229-1.TXT">AI05-0229-1</A></I>} 
<span class="delete3">Note that inline expansion is desired no matter 
what name is used in the call. This allows one to request inlining for 
only one of several overloaded subprograms as follows:</span>&nbsp;</div>
<div class="paranum"><a name="p5.c">5.c/3</a></div>
<div class="SmallExamples"><SPAN STYLE="font-size: 80%"><I>This paragraph 
was deleted.</I></SPAN><span class="delete3"><B>package</B>&nbsp;IO&nbsp;<B>is</B><BR>
&nbsp;&nbsp;&nbsp;<B>procedure</B>&nbsp;Put(X&nbsp;:&nbsp;<B>in</B>&nbsp;Integer);<BR>
&nbsp;&nbsp;&nbsp;<B>procedure</B>&nbsp;Put(X&nbsp;:&nbsp;<B>in</B>&nbsp;String);<BR>
&nbsp;&nbsp;&nbsp;<B>procedure</B>&nbsp;Put(X&nbsp;:&nbsp;<B>in</B>&nbsp;Character);<BR>
<B>private</B><BR>
&nbsp;&nbsp;&nbsp;<B>procedure</B>&nbsp;Character_Put(X&nbsp;:&nbsp;<B>in</B>&nbsp;Character)&nbsp;<B>renames</B>&nbsp;Put;<BR>
&nbsp;&nbsp;&nbsp;<B>pragma</B>&nbsp;Inline(Character_Put);<BR>
<B>end</B>&nbsp;IO;</span></div>
<div class="paranum"><a name="p5.d">5.d/3</a></div>
<div class="SmallExamples"><SPAN STYLE="font-size: 80%"><I>This paragraph 
was deleted.</I></SPAN><span class="delete3"><B>with</B>&nbsp;IO;&nbsp;<B>use</B>&nbsp;IO;<BR>
<B>procedure</B>&nbsp;Main&nbsp;<B>is</B><BR>
&nbsp;&nbsp;&nbsp;I&nbsp;:&nbsp;Integer;<BR>
&nbsp;&nbsp;&nbsp;C&nbsp;:&nbsp;Character;<BR>
<B>begin</B><BR>
&nbsp;&nbsp;&nbsp;...<BR>
&nbsp;&nbsp;&nbsp;Put(C);&nbsp;--<SPAN Class="roman"><I>&nbsp;Inline&nbsp;expansion&nbsp;is&nbsp;desired.</I></SPAN><BR>
&nbsp;&nbsp;&nbsp;Put(I);&nbsp;--<SPAN Class="roman"><I>&nbsp;Inline&nbsp;expansion&nbsp;is&nbsp;NOT&nbsp;desired.</I></SPAN><BR>
<B>end</B>&nbsp;Main;</span></div>
<div class="paranum"><a name="p5.e">5.e/3</a></div>
<div class="Annotations"><B>Ramification:&nbsp;</B>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0229-1.TXT">AI05-0229-1</A></I>} 
The meaning of a subprogram can be changed by <span class="insert3">inline 
expansion as requested by aspect</span><span class="delete3">&nbsp;a <SPAN Class="swiss"><A HREF="AA-2-8.html#S0019">pragma</A></SPAN></span> 
Inline only in the presence of failing checks (see <A HREF="AA-11-6.html">11.6</A>). 
</div>

<H4 Class="centered">Implementation Permissions</H4>
<div class="paranum"><a name="p6">6/3</a></div>
<div class="Normal">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0229-1.TXT">AI05-0229-1</A></I>} 
For each call, an implementation is free to follow or to ignore the recommendation 
<span class="insert3">determined</span><span class="delete3">&nbsp;expressed</span> 
by the <span class="insert3">Inline aspect</span><span class="delete3"><SPAN Class="swiss"><A HREF="AA-2-8.html#S0019">&nbsp;pragma</A></SPAN></span>. 
</div>
<div class="paranum"><a name="p6.a">6.a</a></div>
<div class="Annotations"><B>Ramification:&nbsp;</B>Note, in particular, that 
the recommendation cannot always be followed for a recursive call, and 
is often infeasible for entries. Note also that the implementation can 
inline calls even when no such desire was expressed <span class="insert3">via 
the Inline aspect</span><span class="delete3">&nbsp;by a pragma</span>, so 
long as the semantics of the program remains unchanged.&nbsp;</div>
<div class="paranum"><a name="p6.1">6.1/3</a></div>
<div class="Normal">&nbsp;&nbsp;{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00309.TXT">AI95-00309-01</A></I>} 
<span class="delete3"></span>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0229-1.TXT">AI05-0229-1</A></I>} 
<span class="delete3"></span><span class="insert2"><span class="delete3">An 
implementation may allow a <SPAN Class="swiss"><A HREF="AA-2-8.html#S0019">pragma</A></SPAN> 
Inline that has an argument which is a <SPAN Class="swiss"><A HREF="AA-4-1.html#S0092">direct_name</A></SPAN> 
denoting a <SPAN Class="swiss"><A HREF="AA-6-3.html#S0177">subprogram_body</A></SPAN> 
of the same <SPAN Class="swiss"><A HREF="AA-3-11.html#S0086">declarative_part</A></SPAN>.</span></span><span class="delete3"></span> 
</div>
<div class="paranum"><a name="p6.b">6.b/3</a></div>
<div class="Annotations"><span class="insert2"><B>Reason:&nbsp;</B></span><span class="insert2"><span class="delete3">This 
is allowed for Ada 83 compatibility. This is only a permission as this 
usage is considered obsolescent.</span></span><span class="insert2"></span> 
</div>
<div class="paranum"><a name="p6.c">6.c/3</a></div>
<div class="Annotations"><span class="insert2"><B>Discussion:&nbsp;</B></span><span class="insert2"><span class="delete3">We 
only need to allow this in <SPAN Class="swiss"><A HREF="AA-3-11.html#S0086">declarative_part</A></SPAN>s, 
because a body is only allowed in another body, and these all have <SPAN Class="swiss"><A HREF="AA-3-11.html#S0086">declarative_part</A></SPAN>s.</span></span><span class="insert2"></span> 
</div>
<div class="NotesHeader">NOTES</div>
<div class="paranum"><a name="p7">7/3</a></div>
<div class="Notes">7&nbsp;&nbsp;{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0229-1.TXT">AI05-0229-1</A></I>} 
<span class="delete3">The <SPAN Class="swiss"><A HREF="AA-4-1.html#S0091">name</A></SPAN> 
in a <SPAN Class="swiss"><A HREF="AA-2-8.html#S0019">pragma</A></SPAN> 
Inline can denote more than one entity in the case of overloading. Such 
a <SPAN Class="swiss"><A HREF="AA-2-8.html#S0019">pragma</A></SPAN> applies 
to all of the denoted entities.</span>&nbsp;</div>

<H4 Class="centered">Incompatibilities With Ada 83</H4>
<div class="paranum"><a name="p7.a">7.a/3</a></div>
<div class="Annotations"><SPAN STYLE="font-size: 80%"><I>This paragraph 
was deleted.</I></SPAN><span class="insert2"></span> {<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00309.TXT">AI95-00309-01</A></I>} 
<span class="insert2"></span>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0229-1.TXT">AI05-0229-1</A></I>} 
<span class="insert2"></span><span class="insert2"><span class="delete3"><A NAME="I3829"></A>A 
pragma Inline cannot refer to a <SPAN Class="swiss"><A HREF="AA-6-3.html#S0177">subprogram_body</A></SPAN> 
outside of that body. The pragma can be given inside of the subprogram 
body. Ada 2005 adds an Implementation Permission to allow this usage 
for compatibility (and Ada 95 implementations also can use this permission), 
but implementations do not have to allow such <SPAN Class="swiss"><A HREF="AA-2-8.html#S0019">pragma</A></SPAN>s.</span></span><span class="insert2"></span> 
</div>

<H4 Class="centered">Extensions to Ada 83</H4>
<div class="paranum"><a name="p7.b">7.b/3</a></div>
<div class="Annotations"><SPAN STYLE="font-size: 80%"><I>This paragraph 
was deleted.</I></SPAN><span class="delete3"></span>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0229-1.TXT">AI05-0229-1</A></I>} 
<span class="delete3"><A NAME="I3830"></A>A <SPAN Class="swiss"><A HREF="AA-2-8.html#S0019">pragma</A></SPAN> 
Inline is allowed inside a <SPAN Class="swiss"><A HREF="AA-6-3.html#S0177">subprogram_body</A></SPAN> 
if there is no corresponding <SPAN Class="swiss"><A HREF="AA-6-1.html#S0163">subprogram_declaration</A></SPAN>. 
This is for uniformity with other program unit pragmas.</span>&nbsp;</div>

<H4 Class="centered">Extensions to Ada 95</H4>
<div class="paranum"><a name="p7.c">7.c/3</a></div>
<div class="Annotations"><SPAN STYLE="font-size: 80%"><I>This paragraph 
was deleted.</I></SPAN><span class="insert2"></span> {<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00309.TXT">AI95-00309-01</A></I>} 
<span class="insert2"></span>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0229-1.TXT">AI05-0229-1</A></I>} 
<span class="insert2"></span><span class="insert2"><span class="delete3"><A NAME="I3831"></A><B>Amendment 
Correction:</B> Implementations are allowed to let <SPAN Class="swiss"><A HREF="AA-2-8.html#S0019">Pragma</A></SPAN> 
Inline apply to a <SPAN Class="swiss"><A HREF="AA-6-3.html#S0177">subprogram_body</A></SPAN>.</span></span><span class="insert2"></span> 
</div>

<H4 Class="centered">Extensions to Ada 2005</H4>
<div class="paranum"><a name="p7.d">7.d/3</a></div>
<div class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0229-1.TXT">AI05-0229-1</A></I>} 
<span class="insert3"><A NAME="I3832"></A>Aspect Inline is new; <SPAN Class="swiss"><A HREF="AA-2-8.html#S0019">pragma</A></SPAN> 
Inline is now obsolescent.</span>&nbsp;</div>

</div>
<div style="margin-top: 0.0em; margin-bottom: 0.6em"><A HREF="AA-TOC.html"><IMG SRC="cont.gif" ALT="Contents" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-0-4.html"><IMG SRC="index.gif" ALT="Index" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-STDS.html"><IMG SRC="lib.gif" ALT="References" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-SRCH.html"><IMG SRC="find.gif" ALT="Search" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-6-3-1.html"><IMG SRC="prev.gif" ALT="Previous" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-6-4.html"><IMG SRC="next.gif" ALT="Next" BORDER=0></A>&nbsp;
</div>
<DIV Style="margin-top:0.0em"><IMG SRC="AE_logo.gif" height=100 width=113 align=right ALT="Ada-Europe">
<SPAN Style="vertical-align: middle; font-size:120%">Ada 2005 and 2012 Editions sponsored in part by <SPAN Style="font-size: 125%"><A HREF="http://www.ada-europe.org/"><B>Ada-Europe</B></A></SPAN></SPAN></DIV>
</BODY>
</HTML>
