<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<HTML>
<HEAD>
    <TITLE>Pragma Partition_Elaboration_Policy</TITLE>
    <META http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
    <META NAME="Author" CONTENT="JTC1/SC22/WG9/ARG, by Randall Brukardt, ARG Editor">
    <META NAME="GENERATOR" CONTENT="Arm_Form.Exe, Ada Reference Manual generator">
    <link rel="stylesheet" href="../styles.css">
	<link rel="icon" href="../logo.svg">
</HEAD>
<BODY TEXT="#000000" BGCOLOR="#FFFFF0" LINK="#000080" VLINK="#330033" ALINK="#0000FF">
<DIV><B><SPAN Style="font-size:200%; color: rgb(0,51,153)">Annotated</SPAN><SPAN Style="font-size:200%; color: rgb(0,0,102)">&nbsp;Ada Reference Manual</SPAN></B> &mdash; <A HREF="AA-TTL.html"><B>Legal Information</B></A></DIV>
<div class="navig"><A HREF="AA-TOC.html">Contents</A>&nbsp;
&nbsp;<A HREF="AA-0-4.html">Index</A>&nbsp;
&nbsp;<A HREF="AA-STDS.html">References</A>&nbsp;
&nbsp;<A HREF="../RM-SRCH.html">Search</A>&nbsp;
&nbsp;<A HREF="AA-H-5.html">Previous</A>&nbsp;
&nbsp;<A HREF="AA-J.html">Next</A>&nbsp;
<img SRC="../logo.svg" class="adaLogo">
</div>
<div class="main">
<H1>H.6 <span class="insert2">Pragma Partition_Elaboration_Policy</span><span class="delete2"></span></H1>
<div class="paranum"><a name="p1">1/3</a></div>
<div class="Normal">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00265.TXT">AI95-00265-01</A></I>} 
<span class="insert2"></span>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0299-1.TXT">AI05-0299-1</A></I>} 
<span class="insert2">This&nbsp;</span><span class="insert3">subclause</span><span class="insert2"></span><span class="insert2"><span class="delete3">&nbsp;clause</span></span><span class="insert2">&nbsp;defines a <SPAN Class="swiss"><A HREF="AA-2-8.html#S0019">pragma</A></SPAN> 
for user control over elaboration policy.</span>&nbsp;</div>

<H4 Class="centered">Syntax</H4>
<div class="paranum"><a name="p2">2/2</a></div>
<div class="Indented1" style="margin-bottom: 0.4em">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00265.TXT">AI95-00265-01</A></I>} 
<span class="insert2">The form of a <SPAN Class="swiss"><A HREF="AA-2-8.html#S0019">pragma</A></SPAN> 
Partition_Elaboration_Policy is as follows:</span>&nbsp;</div>
<div class="paranum"><a name="p3">3/2</a></div>
<div class="Indented1">&nbsp;&nbsp;<span class="insert2"><B>pragma</B> 
<A NAME="I9504"></A><A NAME="I9505"></A>Partition_Elaboration_Policy 
(<I>policy_</I><A NAME="I9506"></A><SPAN Class="swiss"><A HREF="AA-2-3.html#S0002">identifier</A></SPAN>);</span></div>
<div class="paranum"><a name="p4">4/2</a></div>
<div class="Indented1"><span class="insert2">The <I>policy_</I><SPAN Class="swiss"><A HREF="AA-2-3.html#S0002">identifier</A></SPAN> 
shall be either Sequential, Concurrent or an implementation-defined identifier.</span> 
</div>
<div class="paranum"><a name="p4.a">4.a/2</a></div>
<div class="Annotations"><span class="insert2"><B>Implementation defined: 
</B></span><span class="insert2">Implementation-defined <I>policy_</I><SPAN Class="swiss"><A HREF="AA-2-3.html#S0002">identifier</A></SPAN>s 
allowed in a <SPAN Class="swiss"><A HREF="AA-2-8.html#S0019">pragma</A></SPAN> 
Partition_Elaboration_Policy.</span></div>
<div class="paranum"><a name="p4.b">4.b/3</a></div>
<div class="Annotations"><span class="insert3"><B>Ramification:&nbsp;</B>Note 
that the Ravenscar profile (see <A HREF="AA-D-13.html">D.13</A>) has 
nothing to say about which Partition_Elaboration_Policy is used. This 
was intentionally omitted from the profile, as there was no agreement 
as to whether the Sequential policy should be required for Ravenscar 
programs. As such it was defined separately.</span>&nbsp;</div>

<H4 Class="centered">Post-Compilation Rules</H4>
<div class="paranum"><a name="p5">5/2</a></div>
<div class="Normal">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00265.TXT">AI95-00265-01</A></I>} 
<span class="insert2"><A NAME="I9507"></A><A NAME="I9508"></A>A <SPAN Class="swiss"><A HREF="AA-2-8.html#S0019">pragma</A></SPAN> 
Partition_Elaboration_Policy is a configuration pragma. It specifies 
the elaboration policy for a partition. At most one elaboration policy 
shall be specified for a partition.</span></div>
<div class="paranum"><a name="p6">6/3</a></div>
<div class="Normal">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00265.TXT">AI95-00265-01</A></I>} 
<span class="insert2"></span>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0264-1.TXT">AI05-0264-1</A></I>} 
<span class="insert2">If the Sequential policy is specified for a partition</span><span class="insert3">,</span><span class="insert2">&nbsp;then pragma Restrictions (No_Task_Hierarchy) shall also be specified 
for the partition.</span>&nbsp;</div>

<H4 Class="centered">Dynamic Semantics</H4>
<div class="paranum"><a name="p7">7/2</a></div>
<div class="Normal">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00265.TXT">AI95-00265-01</A></I>} 
<span class="insert2">Notwithstanding<A NAME="I9509"></A> what this International 
Standard says elsewhere, this <SPAN Class="swiss"><A HREF="AA-2-8.html#S0019">pragma</A></SPAN> 
allows partition elaboration rules concerning task activation and interrupt 
attachment to be changed. If the <I>policy_</I><SPAN Class="swiss"><A HREF="AA-2-3.html#S0002">identifier</A></SPAN> 
is Concurrent, or if there is no pragma Partition_Elaboration_Policy 
defined for the partition, then the rules defined elsewhere in this Standard 
apply.</span></div>
<div class="paranum"><a name="p8">8/2</a></div>
<div class="Normal" style="margin-bottom: 0.4em">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00265.TXT">AI95-00265-01</A></I>} 
<span class="insert2"></span>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00421.TXT">AI95-00421-01</A></I>} 
<span class="insert2">If the partition elaboration policy is Sequential, 
then task activation and interrupt attachment are performed in the following 
sequence of steps:</span></div>
<div class="paranum"><a name="p9">9/2</a></div>
<div class="Bulleted"><span class="insert2">The activation of all library-level 
tasks and the attachment of interrupt handlers are deferred until all 
library units are elaborated.</span></div>
<div class="paranum"><a name="p10">10/2</a></div>
<div class="Bulleted"><span class="insert2">The interrupt handlers are 
attached by the environment task.</span></div>
<div class="paranum"><a name="p11">11/2</a></div>
<div class="Bulleted"><span class="insert2">The environment task is suspended 
while the library-level tasks are activated.</span></div>
<div class="paranum"><a name="p12">12/2</a></div>
<div class="Bulleted"><span class="insert2">The environment task executes 
the main subprogram (if any) concurrently with these executing tasks.</span> 
</div>
<div class="paranum"><a name="p13">13/2</a></div>
<div class="Normal">&nbsp;{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00265.TXT">AI95-00265-01</A></I>} 
<span class="insert2"></span>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00421.TXT">AI95-00421-01</A></I>} 
<span class="insert2">If several dynamic interrupt handler attachments 
for the same interrupt are deferred, then the most recent call of Attach_Handler 
or Exchange_Handler determines which handler is attached.</span></div>
<div class="paranum"><a name="p14">14/2</a></div>
<div class="Normal">&nbsp;{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00265.TXT">AI95-00265-01</A></I>} 
<span class="insert2"></span>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00421.TXT">AI95-00421-01</A></I>} 
<span class="insert2">If any deferred task activation fails, Tasking_Error 
is raised at the beginning of the sequence of statements of the body 
of the environment task prior to calling the main subprogram.</span></div>

<H4 Class="centered">Implementation Advice</H4>
<div class="paranum"><a name="p15">15/3</a></div>
<div class="Normal">&nbsp;{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00265.TXT">AI95-00265-01</A></I>} 
<span class="insert2"></span>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0264-1.TXT">AI05-0264-1</A></I>} 
<span class="insert2">If the partition elaboration policy is Sequential 
and the Environment task becomes permanently blocked during elaboration</span><span class="insert3">,</span><span class="insert2">&nbsp;then the partition is deadlocked and it is recommended that the partition 
be immediately terminated.</span>&nbsp;</div>
<div class="paranum"><a name="p15.a">15.a/3</a></div>
<div class="Annotations"><B>Implementation Advice:&nbsp;</B><span class="insert2">If 
the partition elaboration policy is Sequential and the Environment task 
becomes permanently blocked during elaboration</span><span class="insert3">,</span><span class="insert2">&nbsp;then the partition should be immediately terminated.</span></div>

<H4 Class="centered">Implementation Permissions</H4>
<div class="paranum"><a name="p16">16/3</a></div>
<div class="Normal">&nbsp;{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00265.TXT">AI95-00265-01</A></I>} 
<span class="insert2"></span>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0264-1.TXT">AI05-0264-1</A></I>} 
<span class="insert2">If the partition elaboration policy is Sequential 
and any task activation fails</span><span class="insert3">,</span><span class="insert2">&nbsp;then an implementation may immediately terminate the active partition 
to mitigate the hazard posed by continuing to execute with a subset of 
the tasks being active.</span>&nbsp;</div>
<div class="NotesHeader">NOTES</div>
<div class="paranum"><a name="p17">17/2</a></div>
<div class="Notes">12&nbsp;&nbsp;{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00421.TXT">AI95-00421-01</A></I>} 
<span class="insert2">If any deferred task activation fails, the environment 
task is unable to handle the Tasking_Error exception and completes immediately. 
By contrast, if the partition elaboration policy is Concurrent, then 
this exception could be handled within a library unit.</span>&nbsp;</div>

<H4 Class="centered">Extensions to Ada 95</H4>
<div class="paranum"><a name="p17.a">17.a/2</a></div>
<div class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00265.TXT">AI95-00265-01</A></I>} 
<span class="insert2"></span>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00421.TXT">AI95-00421-01</A></I>} 
<span class="insert2"><A NAME="I9510"></A><SPAN Class="swiss"><A HREF="AA-2-8.html#S0019">Pragma</A></SPAN> 
Partition_Elaboration_Policy is new.</span>&nbsp;</div>

</div>
<div class="navig"><A HREF="AA-TOC.html">Contents</A>&nbsp;
&nbsp;<A HREF="AA-0-4.html">Index</A>&nbsp;
&nbsp;<A HREF="AA-STDS.html">References</A>&nbsp;
&nbsp;<A HREF="AA-SRCH.html">Search</A>&nbsp;
&nbsp;<A HREF="AA-H-5.html">Previous</A>&nbsp;
&nbsp;<A HREF="AA-J.html">Next</A>&nbsp;
</div>
<DIV Style="margin-top:0.0em">
<SPAN Style="vertical-align: middle; font-size:120%">Ada 2005 and 2012 Editions sponsored in part by <SPAN Style="font-size: 125%"><A HREF="http://www.ada-europe.org/"><B>Ada-Europe</B></A></SPAN></SPAN></DIV>
</BODY>
</HTML>
